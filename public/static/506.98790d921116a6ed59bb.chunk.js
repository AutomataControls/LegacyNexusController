"use strict";(self.webpackChunkautomata_neural_nexus_portal=self.webpackChunkautomata_neural_nexus_portal||[]).push([[506],{991:(n,e,t)=>{t.d(e,{A:()=>j});var s=t(4848),a=t(923),i=t(5072),o=t.n(i),r=t(7825),l=t.n(r),c=t(7659),d=t.n(c),p=t(5056),u=t.n(p),m=t(540),g=t.n(m),h=t(1113),x=t.n(h),b=t(5126),f={};f.styleTagTransform=x(),f.setAttributes=u(),f.insert=d().bind(null,"head"),f.domAPI=l(),f.insertStyleElement=g(),o()(b.A,f),b.A&&b.A.locals&&b.A.locals;const j=({checked:n,onCheckedChange:e,disabled:t=!1,className:i=""})=>(0,s.jsx)(a.bL,{className:`switch-root ${i}`,checked:n,onCheckedChange:e,disabled:t,children:(0,s.jsx)(a.zi,{className:"switch-thumb"})})},4193:(n,e,t)=>{t.d(e,{A:()=>r});var s=t(1601),a=t.n(s),i=t(6314),o=t.n(i)()(a());o.push([n.id,"/* Admin Page Styles */\n.admin-container {\n  padding: 2rem;\n  max-width: 1400px;\n  margin: 0 auto;\n}\n\n.admin-header {\n  margin-bottom: 2rem;\n  padding-bottom: 1.5rem;\n  border-bottom: 2px solid #e5e7eb;\n}\n\n.admin-title {\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n  margin-bottom: 0.5rem;\n}\n\n.admin-title h1 {\n  font-size: 2rem;\n  font-weight: 600;\n  color: #1f2937;\n  margin: 0;\n}\n\n.admin-title svg {\n  color: #14b8a6;\n}\n\n.admin-subtitle {\n  color: #6b7280;\n  font-size: 1rem;\n  margin-left: 2.5rem;\n}\n\n/* Tabs */\n.admin-tabs {\n  display: flex;\n  gap: 1rem;\n  margin-bottom: 2rem;\n  border-bottom: 2px solid #e5e7eb;\n}\n\n.admin-tabs .tab-button {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 0.75rem 1.5rem;\n  background: none;\n  border: none;\n  color: #6b7280;\n  font-size: 0.95rem;\n  font-weight: 500;\n  cursor: pointer;\n  position: relative;\n  transition: color 0.2s;\n}\n\n.admin-tabs .tab-button:hover {\n  color: #374151;\n}\n\n.admin-tabs .tab-button.active {\n  color: #14b8a6;\n}\n\n.admin-tabs .tab-button.active::after {\n  content: '';\n  position: absolute;\n  bottom: -2px;\n  left: 0;\n  right: 0;\n  height: 2px;\n  background-color: #14b8a6;\n}\n\n/* Content Area */\n.admin-content {\n  background: white;\n  border-radius: 0.75rem;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\n  padding: 2rem;\n  min-height: 500px;\n}\n\n/* Audit Section */\n.audit-section {\n  width: 100%;\n}\n\n.audit-controls {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 1.5rem;\n}\n\n.audit-controls h2 {\n  margin: 0;\n  font-size: 1.5rem;\n  color: #1f2937;\n}\n\n.time-selector {\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n}\n\n.time-selector label {\n  color: #6b7280;\n  font-weight: 500;\n}\n\n.time-selector select {\n  padding: 0.5rem 1rem;\n  border: 1px solid #e5e7eb;\n  border-radius: 0.375rem;\n  background: white;\n  color: #1f2937;\n  font-size: 0.95rem;\n  cursor: pointer;\n  transition: border-color 0.2s;\n}\n\n.time-selector select:hover {\n  border-color: #14b8a6;\n}\n\n.time-selector select:focus {\n  outline: none;\n  border-color: #14b8a6;\n  box-shadow: 0 0 0 3px rgba(20, 184, 166, 0.1);\n}\n\n/* Audit Table */\n.audit-table-wrapper {\n  overflow-x: auto;\n}\n\n.audit-table {\n  width: 100%;\n  border-collapse: collapse;\n}\n\n.audit-table thead {\n  background-color: #f9fafb;\n}\n\n.audit-table th {\n  padding: 0.75rem 1rem;\n  text-align: left;\n  font-weight: 600;\n  color: #374151;\n  font-size: 0.875rem;\n  text-transform: uppercase;\n  letter-spacing: 0.05em;\n  border-bottom: 2px solid #e5e7eb;\n}\n\n.audit-table td {\n  padding: 0.75rem 1rem;\n  border-bottom: 1px solid #e5e7eb;\n  font-size: 0.9rem;\n}\n\n.time-cell {\n  color: #6b7280;\n  font-family: monospace;\n  font-size: 0.85rem;\n}\n\n.user-cell .username {\n  font-weight: 500;\n  color: #1f2937;\n}\n\n.action-cell .action-badge {\n  display: inline-flex;\n  align-items: center;\n  gap: 0.375rem;\n  padding: 0.25rem 0.75rem;\n  background: #f3f4f6;\n  border-radius: 9999px;\n  font-size: 0.875rem;\n  font-weight: 500;\n  color: #374151;\n}\n\n.resource-cell {\n  color: #374151;\n  font-family: monospace;\n  font-size: 0.875rem;\n}\n\n.ip-cell code {\n  padding: 0.125rem 0.375rem;\n  background: #f3f4f6;\n  border-radius: 0.25rem;\n  font-size: 0.85rem;\n  color: #4b5563;\n}\n\n.status-cell .status-badge {\n  font-weight: 600;\n  font-size: 0.875rem;\n  text-transform: uppercase;\n}\n\n.details-cell .details {\n  color: #6b7280;\n  font-size: 0.85rem;\n  cursor: help;\n}\n\n/* No Data State */\n.no-data {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 4rem;\n  text-align: center;\n}\n\n.no-data h3 {\n  margin: 1rem 0 0.5rem;\n  font-size: 1.25rem;\n  color: #1f2937;\n}\n\n.no-data p {\n  color: #6b7280;\n}\n\n/* Loading State */\n.loading {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  padding: 4rem;\n  color: #6b7280;\n  font-size: 1.1rem;\n}\n\n/* Access Denied */\n.access-denied {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 4rem;\n  text-align: center;\n}\n\n.access-denied h2 {\n  margin: 1rem 0 0.5rem;\n  font-size: 1.5rem;\n  color: #1f2937;\n}\n\n.access-denied p {\n  color: #6b7280;\n  font-size: 1rem;\n}\n\n/* Feature Placeholder */\n.feature-placeholder {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 4rem 2rem;\n  text-align: center;\n}\n\n.feature-placeholder h2 {\n  margin: 1.5rem 0 1rem;\n  font-size: 1.75rem;\n  color: #1f2937;\n}\n\n.feature-placeholder p {\n  color: #6b7280;\n  font-size: 1rem;\n  margin-bottom: 2rem;\n  max-width: 500px;\n}\n\n.placeholder-badge {\n  display: inline-block;\n  padding: 0.5rem 1.5rem;\n  background: linear-gradient(135deg, #14b8a6 0%, #06b6d4 100%);\n  color: white;\n  border-radius: 9999px;\n  font-weight: 600;\n  font-size: 0.875rem;\n  text-transform: uppercase;\n  letter-spacing: 0.05em;\n  margin-bottom: 1rem;\n  box-shadow: 0 4px 6px rgba(20, 184, 166, 0.2);\n}\n\n.placeholder-features {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\n  gap: 1.5rem;\n  margin-top: 2rem;\n  max-width: 600px;\n  width: 100%;\n}\n\n.feature-item {\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n  padding: 1rem;\n  background: #f9fafb;\n  border-radius: 0.5rem;\n  border: 2px solid #e5e7eb;\n  transition: all 0.2s;\n}\n\n.feature-item:hover {\n  background: white;\n  border-color: #14b8a6;\n  transform: translateY(-2px);\n  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);\n}\n\n.feature-icon {\n  font-size: 1.5rem;\n}\n\n.feature-item span:last-child {\n  font-weight: 500;\n  color: #374151;\n  font-size: 0.95rem;\n}\n\n/* Logic Engine Section */\n.logic-section {\n  width: 100%;\n}\n\n.logic-section h2 {\n  margin-bottom: 1.5rem;\n  color: #1f2937;\n  font-size: 1.3rem;\n}\n\n.equipment-selector {\n  background: #f9fafb;\n  border: 1px solid #e5e7eb;\n  border-radius: 6px;\n  padding: 15px;\n  margin-bottom: 15px;\n}\n\n.equipment-selector label {\n  display: block;\n  font-weight: 500;\n  color: #374151;\n  margin-bottom: 8px;\n  font-size: 13px;\n}\n\n.equipment-id-select {\n  width: 100%;\n  max-width: 500px;\n  padding: 8px 10px;\n  border: 1px solid #d1d5db;\n  border-radius: 4px;\n  font-size: 13px;\n  font-family: 'Courier New', monospace;\n  background: white;\n  cursor: pointer;\n}\n\n.equipment-id-select:focus {\n  border-color: #14b8a6;\n  outline: none;\n}\n\n.equipment-id-select:disabled {\n  background: #f3f4f6;\n  cursor: not-allowed;\n  opacity: 0.6;\n}\n\n.equipment-info {\n  margin-top: 10px;\n  color: #6b7280;\n}\n\n.existing-equipment {\n  background: #f9fafb;\n  border: 1px solid #e5e7eb;\n  border-radius: 8px;\n  padding: 20px;\n  margin-bottom: 20px;\n}\n\n.equipment-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));\n  gap: 10px;\n  margin-top: 15px;\n}\n\n.equipment-card {\n  display: flex;\n  flex-direction: column;\n  padding: 12px;\n  border: 2px solid #e5e7eb;\n  border-radius: 6px;\n  background: white;\n  cursor: pointer;\n  transition: all 0.2s;\n}\n\n.equipment-card:hover {\n  border-color: #14b8a6;\n  background: #f0fdfa;\n}\n\n.equipment-card.selected {\n  border-color: #14b8a6;\n  background: #f0fdfa;\n}\n\n.equipment-id {\n  font-family: 'Courier New', monospace;\n  font-size: 12px;\n  color: #374151;\n  margin-bottom: 5px;\n}\n\n.equipment-status {\n  font-size: 12px;\n  color: #10b981;\n  font-weight: 600;\n}\n\n.logic-controls {\n  background: #f9fafb;\n  border: 1px solid #e5e7eb;\n  border-radius: 6px;\n  padding: 12px 15px;\n  margin-bottom: 15px;\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n}\n\n.auto-run-controls {\n  display: flex;\n  align-items: center;\n  gap: 15px;\n  padding: 10px;\n  background: white;\n  border-radius: 4px;\n  border: 1px solid #e5e7eb;\n}\n\n.polling-interval-selector {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  margin-left: auto;\n}\n\n.polling-interval-selector label {\n  color: #6b7280;\n  font-size: 13px;\n  font-weight: 500;\n}\n\n.interval-select {\n  padding: 5px 10px;\n  border: 1px solid #d1d5db;\n  border-radius: 4px;\n  font-size: 13px;\n  background: white;\n  cursor: pointer;\n  transition: border-color 0.2s;\n}\n\n.interval-select:hover {\n  border-color: #9ca3af;\n}\n\n.interval-select:focus {\n  outline: none;\n  border-color: #14b8a6;\n  box-shadow: 0 0 0 2px rgba(20, 184, 166, 0.1);\n}\n\n.logic-enable-toggle {\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n}\n\n.toggle-container {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  font-size: 13px;\n  font-weight: 500;\n}\n\n.toggle-label-text {\n  color: #374151;\n  min-width: 100px;\n}\n\n.toggle-switch.large {\n  width: 40px;\n  height: 18px;\n}\n\n.toggle-switch.large .toggle-slider {\n  top: 1px;\n  left: 1px;\n  width: 16px;\n  height: 16px;\n}\n\n.toggle-switch.large input:checked + .toggle-slider {\n  transform: translateX(22px);\n}\n\n.status-text {\n  font-weight: 600;\n  padding: 3px 10px;\n  border-radius: 4px;\n  min-width: 70px;\n  text-align: center;\n  font-size: 12px;\n}\n\n.status-text.enabled {\n  background: #10b981;\n  color: white;\n}\n\n.status-text.disabled {\n  background: #6b7280;\n  color: white;\n}\n\n.config-warning {\n  background: #fef3c7;\n  border: 1px solid #fbbf24;\n  color: #92400e;\n  padding: 6px 10px;\n  border-radius: 4px;\n  font-size: 12px;\n  font-weight: 500;\n  display: flex;\n  align-items: center;\n  gap: 6px;\n}\n\n.logic-upload {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 2rem;\n  padding: 1.5rem;\n  background: #f9fafb;\n  border-radius: 0.5rem;\n  border: 1px solid #e5e7eb;\n}\n\n.upload-controls {\n  display: flex;\n  align-items: center;\n  gap: 1rem;\n}\n\n.logic-actions {\n  display: flex;\n  gap: 1rem;\n}\n\n.file-name {\n  color: #374151;\n  font-weight: 500;\n  padding: 0.5rem 1rem;\n  background: white;\n  border-radius: 0.375rem;\n  border: 1px solid #e5e7eb;\n}\n\n.logic-editor {\n  margin-bottom: 2rem;\n}\n\n.editor-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 1rem;\n}\n\n.editor-header h3 {\n  margin: 0;\n  color: #374151;\n}\n\n.editor-actions {\n  display: flex;\n  gap: 0.75rem;\n}\n\n.btn-modify {\n  padding: 6px 14px;\n  background: #8b5cf6;\n  color: white;\n  border: none;\n  border-radius: 4px;\n  font-size: 12px;\n  font-weight: 500;\n  cursor: pointer;\n  display: inline-flex;\n  align-items: center;\n  gap: 6px;\n  transition: all 0.2s;\n}\n\n.btn-modify:hover {\n  background: #7c3aed;\n}\n\n.btn-save-changes {\n  padding: 6px 14px;\n  background: #10b981;\n  color: white;\n  border: none;\n  border-radius: 4px;\n  font-size: 12px;\n  font-weight: 500;\n  cursor: pointer;\n  display: inline-flex;\n  align-items: center;\n  gap: 6px;\n  transition: all 0.2s;\n}\n\n.btn-save-changes:hover {\n  background: #059669;\n}\n\n.btn-cancel {\n  padding: 6px 14px;\n  background: #6b7280;\n  color: white;\n  border: none;\n  border-radius: 4px;\n  font-size: 12px;\n  font-weight: 500;\n  cursor: pointer;\n  display: inline-flex;\n  align-items: center;\n  gap: 6px;\n  transition: all 0.2s;\n}\n\n.btn-cancel:hover {\n  background: #4b5563;\n}\n\n.logic-editor textarea {\n  width: 100%;\n  min-height: 400px;\n  padding: 1rem;\n  font-family: 'Courier New', monospace;\n  font-size: 0.9rem;\n  border: 1px solid #e5e7eb;\n  border-radius: 0.5rem;\n  background: #1f2937;\n  color: #10b981;\n  resize: vertical;\n  transition: border-color 0.2s, box-shadow 0.2s;\n}\n\n.logic-editor textarea.readonly {\n  background: #1a1f2e;\n  cursor: default;\n}\n\n.logic-editor textarea.editing {\n  border-color: #8b5cf6;\n  box-shadow: 0 0 0 3px rgba(139, 92, 246, 0.1);\n}\n\n.edit-indicator {\n  margin-top: 0.5rem;\n  padding: 0.5rem 1rem;\n  background: #f0f9ff;\n  border: 1px solid #0ea5e9;\n  border-radius: 0.375rem;\n  color: #0c4a6e;\n  font-size: 0.875rem;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n}\n\n.logic-output {\n  padding: 1.5rem;\n  background: #f9fafb;\n  border-radius: 0.5rem;\n  border: 1px solid #e5e7eb;\n}\n\n.logic-output h3 {\n  margin-bottom: 1rem;\n  color: #374151;\n}\n\n.logic-output pre {\n  padding: 1rem;\n  background: #1f2937;\n  color: #10b981;\n  border-radius: 0.375rem;\n  font-family: 'Courier New', monospace;\n  font-size: 0.85rem;\n  overflow-x: auto;\n  white-space: pre-wrap;\n}\n\n/* Processing Logic Results */\n.processing-results {\n  margin-top: 2rem;\n  padding: 1.5rem;\n  background: #f9fafb;\n  border-radius: 0.5rem;\n  border: 1px solid #e5e7eb;\n}\n\n.processing-results h3 {\n  margin-bottom: 1rem;\n  color: #374151;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n}\n\n.processing-results h3::after {\n  content: '🔴';\n  font-size: 0.8rem;\n  animation: pulse 2s infinite;\n}\n\n@keyframes pulse {\n  0%, 100% { opacity: 1; }\n  50% { opacity: 0.5; }\n}\n\n.results-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));\n  gap: 1rem;\n  margin-bottom: 1rem;\n  max-height: 400px;\n  overflow-y: auto;\n}\n\n.result-card {\n  background: white;\n  border: 1px solid #e5e7eb;\n  border-radius: 0.5rem;\n  padding: 1rem;\n  transition: all 0.2s;\n}\n\n.result-card:first-child {\n  border-color: #14b8a6;\n  box-shadow: 0 0 0 2px rgba(20, 184, 166, 0.1);\n}\n\n.result-timestamp {\n  font-size: 0.75rem;\n  color: #6b7280;\n  margin-bottom: 0.75rem;\n  font-weight: 600;\n  text-transform: uppercase;\n  letter-spacing: 0.05em;\n}\n\n.result-data {\n  display: flex;\n  flex-direction: column;\n  gap: 0.5rem;\n}\n\n.result-row {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 0.25rem 0;\n  border-bottom: 1px solid #f3f4f6;\n}\n\n.result-row:last-child {\n  border-bottom: none;\n}\n\n.result-label {\n  font-size: 0.8rem;\n  color: #6b7280;\n  font-weight: 500;\n}\n\n.result-value {\n  font-size: 0.875rem;\n  font-weight: 600;\n  color: #1f2937;\n}\n\n.result-value.heat {\n  color: #dc2626;\n}\n\n.result-value.cool {\n  color: #2563eb;\n}\n\n.result-value.active {\n  color: #10b981;\n}\n\n.result-value.inactive {\n  color: #6b7280;\n}\n\n.results-info {\n  text-align: center;\n  color: #6b7280;\n  padding-top: 0.5rem;\n  border-top: 1px solid #e5e7eb;\n}\n\n.results-info small {\n  font-size: 0.75rem;\n}\n\n/* Board Configuration Section */\n.boards-section h2 {\n  margin-bottom: 1.5rem;\n  color: #1f2937;\n}\n\n.boards-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(500px, 1fr));\n  gap: 1.5rem;\n}\n\n.board-card {\n  padding: 1.5rem;\n  background: white;\n  border: 2px solid #e5e7eb;\n  border-radius: 0.75rem;\n  transition: all 0.2s;\n  min-width: 500px;\n}\n\n.board-card:hover {\n  border-color: #14b8a6;\n  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);\n}\n\n.board-card h3 {\n  margin-bottom: 1rem;\n  color: #1f2937;\n  font-size: 1.1rem;\n}\n\n.board-status {\n  margin-bottom: 1rem;\n}\n\n.board-toggle-container {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  gap: 1rem;\n}\n\n.board-toggle-container span {\n  color: #374151;\n  font-weight: 500;\n  font-size: 0.95rem;\n}\n\n/* Remove old toggle styles - using the existing .toggle-switch from PID section */\n\n.board-type {\n  margin-bottom: 1.5rem;\n}\n\n.board-type label {\n  display: block;\n  margin-bottom: 0.5rem;\n  color: #6b7280;\n  font-weight: 500;\n  font-size: 0.9rem;\n}\n\n.board-type select {\n  width: 100%;\n  padding: 0.5rem;\n  border: 1px solid #e5e7eb;\n  border-radius: 0.375rem;\n  background: white;\n  color: #1f2937;\n  font-size: 0.95rem;\n}\n\n.board-outputs h4 {\n  margin-bottom: 0.75rem;\n  color: #374151;\n  font-size: 1rem;\n}\n\n.output-group {\n  margin-bottom: 1.5rem;\n}\n\n.output-group h5 {\n  margin-bottom: 0.75rem;\n  color: #6b7280;\n  font-size: 0.9rem;\n  font-weight: 600;\n}\n\n.output-item {\n  display: grid;\n  grid-template-columns: 50px 1fr 50px;\n  align-items: center;\n  gap: 0.75rem;\n  margin-bottom: 0.5rem;\n  padding: 0.375rem;\n}\n\n.output-item.compact {\n  display: grid;\n  grid-template-columns: 40px 1fr;\n  gap: 0.5rem;\n  margin-bottom: 0.375rem;\n}\n\n.output-item input[type=\"text\"] {\n  padding: 0.375rem 0.5rem;\n  border: 1px solid #e5e7eb;\n  border-radius: 0.375rem;\n  font-size: 0.9rem;\n}\n\n.output-number {\n  font-weight: 600;\n  color: #6b7280;\n  font-size: 0.875rem;\n}\n\n.output-item label {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  color: #6b7280;\n  font-size: 0.9rem;\n}\n\n.output-item.compact span {\n  font-weight: 600;\n  color: #6b7280;\n  font-size: 0.875rem;\n}\n\n/* Input Configuration */\n.input-group {\n  margin-top: 1.5rem;\n  padding-top: 1.5rem;\n  border-top: 1px solid #e5e7eb;\n}\n\n.input-group h5 {\n  margin-bottom: 0.75rem;\n  color: #6b7280;\n  font-size: 0.9rem;\n  font-weight: 600;\n}\n\n.input-config-item {\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n  margin-bottom: 0.5rem;\n  padding: 0.5rem;\n  background: #f9fafb;\n  border-radius: 0.375rem;\n  flex-wrap: nowrap;\n}\n\n.input-config-item:hover {\n  background: #f3f4f6;\n}\n\n.input-number {\n  min-width: 40px;\n  font-weight: 600;\n  color: #6b7280;\n  font-size: 0.875rem;\n}\n\n.input-config-item input[type=\"text\"] {\n  flex: 1;\n  min-width: 200px;\n  padding: 0.375rem 0.5rem;\n  border: 1px solid #e5e7eb;\n  border-radius: 0.375rem;\n  font-size: 0.875rem;\n}\n\n.input-config-item input[type=\"text\"]:focus {\n  outline: none;\n  border-color: #14b8a6;\n  box-shadow: 0 0 0 2px rgba(20, 184, 166, 0.1);\n}\n\n.input-type-select,\n.conversion-select {\n  min-width: 100px;\n  max-width: 120px;\n  padding: 0.375rem 0.5rem;\n  border: 1px solid #e5e7eb;\n  border-radius: 0.375rem;\n  font-size: 0.875rem;\n  background: white;\n  cursor: pointer;\n}\n\n.input-type-select:focus,\n.conversion-select:focus {\n  outline: none;\n  border-color: #14b8a6;\n  box-shadow: 0 0 0 2px rgba(20, 184, 166, 0.1);\n}\n\n/* Using common .toggle-switch styles for all toggles */\n\n/* Board Actions */\n.board-actions {\n  display: flex;\n  justify-content: center;\n  gap: 15px;\n  margin-top: 20px;\n}\n\n.board-actions .btn-save {\n  padding: 12px 30px;\n  border-radius: 6px;\n  font-size: 14px;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s;\n  background: #14b8a6;\n  color: white;\n  border: none;\n}\n\n.board-actions .btn-save:hover {\n  background: #0d9488;\n}\n\n/* BMS Status Section */\n.status-section h2 {\n  margin-bottom: 1.5rem;\n  color: #1f2937;\n}\n\n.status-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 2rem;\n  padding: 1.5rem;\n  background: #f9fafb;\n  border-radius: 0.75rem;\n}\n\n.connection-toggle .toggle-btn {\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n  padding: 0.75rem 1.5rem;\n  border: 2px solid #e5e7eb;\n  border-radius: 0.5rem;\n  background: white;\n  font-size: 1rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s;\n}\n\n.toggle-btn.enabled {\n  background: #10b981;\n  color: white;\n  border-color: #10b981;\n}\n\n.toggle-btn.disabled {\n  background: #ef4444;\n  color: white;\n  border-color: #ef4444;\n}\n\n.bms-address {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 0.75rem 1.5rem;\n  background: white;\n  border-radius: 0.5rem;\n  border: 1px solid #e5e7eb;\n}\n\n.bms-address span {\n  font-weight: 500;\n  color: #374151;\n}\n\n.status-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));\n  gap: 1.5rem;\n}\n\n.status-card {\n  padding: 1.5rem;\n  background: white;\n  border-radius: 0.75rem;\n  border: 1px solid #e5e7eb;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);\n}\n\n.status-card h3 {\n  margin-bottom: 1rem;\n  color: #1f2937;\n  font-size: 1rem;\n}\n\n.status-indicator {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 0.75rem;\n  padding: 1.5rem;\n}\n\n.status-indicator.connected {\n  color: #10b981;\n}\n\n.status-indicator.disconnected {\n  color: #ef4444;\n}\n\n.status-indicator span {\n  font-weight: 600;\n  font-size: 1.1rem;\n}\n\n.status-details {\n  display: flex;\n  flex-direction: column;\n  gap: 0.75rem;\n}\n\n.detail-row {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 0.5rem 0;\n  border-bottom: 1px solid #f3f4f6;\n}\n\n.detail-row:last-child {\n  border-bottom: none;\n}\n\n.detail-row span:first-child {\n  color: #6b7280;\n  font-size: 0.9rem;\n}\n\n.detail-row span:last-child {\n  font-weight: 500;\n  color: #1f2937;\n}\n\n.source-badge {\n  padding: 0.25rem 0.75rem;\n  border-radius: 9999px;\n  font-size: 0.85rem;\n  font-weight: 600;\n}\n\n.source-badge.remote {\n  background: #dbeafe;\n  color: #1e40af;\n}\n\n.source-badge.local {\n  background: #fef3c7;\n  color: #92400e;\n}\n\n.failover-info {\n  padding: 1rem;\n}\n\n.failover-active,\n.failover-standby {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 0.75rem;\n  text-align: center;\n}\n\n.failover-active p,\n.failover-standby p {\n  margin: 0;\n  color: #374151;\n  font-size: 0.95rem;\n}\n\n.integration-status {\n  display: flex;\n  flex-direction: column;\n  gap: 0.75rem;\n}\n\n.integration-status .active {\n  color: #10b981;\n  font-weight: 600;\n}\n\n.integration-status .inactive {\n  color: #ef4444;\n  font-weight: 600;\n}\n\n/* Buttons */\n.btn-primary,\n.btn-success,\n.btn-info {\n  display: inline-flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 0.625rem 1.25rem;\n  border: none;\n  border-radius: 0.5rem;\n  font-size: 0.95rem;\n  font-weight: 500;\n  cursor: pointer;\n  transition: all 0.2s;\n}\n\n.btn-primary {\n  background: #14b8a6;\n  color: white;\n}\n\n.btn-primary:hover {\n  background: #0d9488;\n}\n\n.btn-success {\n  background: #10b981;\n  color: white;\n}\n\n.btn-success:hover {\n  background: #059669;\n}\n\n.btn-success:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n\n.btn-info {\n  background: #06b6d4;\n  color: white;\n}\n\n.btn-info:hover {\n  background: #0891b2;\n}\n\n.btn-info:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n\n/* Responsive Design */\n@media (max-width: 768px) {\n  .admin-container {\n    padding: 1rem;\n  }\n  \n  .admin-tabs {\n    flex-wrap: wrap;\n  }\n  \n  .audit-controls {\n    flex-direction: column;\n    align-items: flex-start;\n    gap: 1rem;\n  }\n  \n  .audit-table {\n    font-size: 0.8rem;\n  }\n  \n  .audit-table th,\n  .audit-table td {\n    padding: 0.5rem;\n  }\n  \n  .placeholder-features {\n    grid-template-columns: 1fr;\n  }\n}\n\n/* PID Controllers Section */\n.pid-section {\n  width: 100%;\n  padding: 20px;\n}\n\n.pid-section h2 {\n  margin-bottom: 1.5rem;\n  color: #1f2937;\n}\n\n.pid-controllers {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));\n  gap: 20px;\n  margin-bottom: 30px;\n}\n\n.pid-card {\n  background: white;\n  border: 1px solid #e5e7eb;\n  border-radius: 12px;\n  padding: 20px;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\n}\n\n.pid-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 20px;\n  padding-bottom: 15px;\n  border-bottom: 2px solid #f3f4f6;\n}\n\n.pid-header h3 {\n  margin: 0;\n  color: #1f2937;\n  font-size: 1.2rem;\n}\n\n.pid-toggle {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n}\n\n.toggle-label {\n  font-size: 14px;\n  color: #6b7280;\n  font-weight: 500;\n}\n\n.pid-params {\n  display: flex;\n  flex-direction: column;\n  gap: 20px;\n}\n\n.param-row {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  gap: 10px;\n}\n\n.param-row label {\n  flex: 1;\n  font-size: 14px;\n  color: #4b5563;\n  font-weight: 500;\n}\n\n.param-row input[type=\"number\"] {\n  width: 100px;\n  padding: 8px;\n  border: 1px solid #d1d5db;\n  border-radius: 6px;\n  font-size: 14px;\n}\n\n.param-group {\n  background: #f9fafb;\n  border-radius: 8px;\n  padding: 15px;\n}\n\n.param-group h4 {\n  margin: 0 0 12px 0;\n  font-size: 14px;\n  color: #374151;\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n}\n\n.voltage-input {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n}\n\n.voltage-unit {\n  font-size: 13px;\n  color: #6b7280;\n  min-width: 60px;\n}\n\n.action-toggle {\n  display: flex;\n  gap: 5px;\n  margin-bottom: 10px;\n}\n\n.action-btn {\n  flex: 1;\n  padding: 10px;\n  border: 2px solid #e5e7eb;\n  background: white;\n  color: #6b7280;\n  border-radius: 6px;\n  cursor: pointer;\n  font-size: 14px;\n  font-weight: 500;\n  transition: all 0.2s;\n}\n\n.action-btn:hover {\n  border-color: #d1d5db;\n}\n\n.action-btn.active {\n  background: #1f2937;\n  color: white;\n  border-color: #1f2937;\n}\n\n.action-help {\n  font-size: 12px;\n  color: #6b7280;\n  line-height: 1.4;\n}\n\n.action-help p {\n  margin: 0;\n}\n\n.output-display {\n  background: #f3f4f6;\n  border-radius: 8px;\n  padding: 15px;\n}\n\n.output-display h4 {\n  margin: 0 0 10px 0;\n  font-size: 14px;\n  color: #374151;\n}\n\n.output-value {\n  display: flex;\n  align-items: center;\n  gap: 15px;\n  margin-bottom: 10px;\n}\n\n.output-value .voltage {\n  font-size: 24px;\n  font-weight: bold;\n  color: #14b8a6;\n}\n\n.output-value .percentage {\n  font-size: 18px;\n  color: #6b7280;\n}\n\n.output-bar {\n  width: 100%;\n  height: 20px;\n  background: #e5e7eb;\n  border-radius: 10px;\n  overflow: hidden;\n}\n\n.output-fill {\n  height: 100%;\n  background: linear-gradient(90deg, #14b8a6, #06b6d4);\n  transition: width 0.3s ease;\n}\n\n.pid-actions {\n  display: flex;\n  justify-content: center;\n  gap: 15px;\n  margin-top: 20px;\n}\n\n.btn-save,\n.btn-reset {\n  padding: 12px 30px;\n  border-radius: 6px;\n  font-size: 14px;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s;\n}\n\n.btn-save {\n  background: #14b8a6;\n  color: white;\n  border: none;\n}\n\n.btn-save:hover {\n  background: #0d9488;\n}\n\n.btn-reset {\n  background: white;\n  color: #6b7280;\n  border: 2px solid #e5e7eb;\n}\n\n.btn-reset:hover {\n  border-color: #d1d5db;\n  background: #f9fafb;\n}\n\n/* Logic Engine Button Styles - Slimmer */\n.btn-success, .btn-info, .btn-danger, .btn-primary {\n  padding: 6px 14px;\n  border: none;\n  border-radius: 4px;\n  font-size: 12px;\n  font-weight: 500;\n  cursor: pointer;\n  display: inline-flex;\n  align-items: center;\n  gap: 6px;\n  transition: all 0.2s;\n  height: 32px;\n}\n\n.btn-success {\n  background: #10b981;\n  color: white;\n}\n\n.btn-success:hover {\n  background: #059669;\n}\n\n.btn-info {\n  background: #0891b2;\n  color: white;\n}\n\n.btn-info:hover {\n  background: #0e7490;\n}\n\n.btn-danger {\n  background: #ef4444;\n  color: white;\n}\n\n.btn-danger:hover {\n  background: #dc2626;\n}\n\n.btn-remove {\n  padding: 6px 14px;\n  background: #f87171;\n  color: white;\n  border: none;\n  border-radius: 4px;\n  font-size: 12px;\n  font-weight: 500;\n  cursor: pointer;\n  display: inline-flex;\n  align-items: center;\n  gap: 6px;\n  transition: all 0.2s;\n  height: 32px;\n}\n\n.btn-remove:hover {\n  background: #ef4444;\n}\n\n.btn-primary {\n  background: #14b8a6;\n  color: white;\n}\n\n.btn-primary:hover {\n  background: #0d9488;\n}\n\n/* Button icons should be smaller */\n.btn-success svg,\n.btn-info svg,\n.btn-danger svg,\n.btn-primary svg {\n  width: 14px;\n  height: 14px;\n}\n\n.btn-info:disabled,\n.btn-success:disabled,\n.btn-danger:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n\n/* Toggle Switch Styles - Black when ON, Grey when OFF */\n.toggle-switch {\n  position: relative;\n  width: 44px;\n  height: 20px;\n  background: #d1d5db;  /* Grey when OFF */\n  border-radius: 12px;\n  cursor: pointer;\n  transition: background 0.3s ease;\n}\n\n.toggle-switch input {\n  display: none;\n}\n\n.toggle-switch .toggle-slider {\n  position: absolute;\n  top: 2px;\n  left: 2px;\n  width: 16px;\n  height: 16px;\n  background: white;\n  border-radius: 50%;\n  transition: transform 0.3s ease;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);\n}\n\n.toggle-switch input:checked ~ .toggle-slider {\n  transform: translateX(24px);\n}\n\n/* Black background when checked/ON */\n.toggle-switch:has(input:checked),\n.toggle-switch input:checked + .toggle-slider::before {\n  background: #1f2937 !important;  /* Black when ON */\n}\n\n/* For browsers that don't support :has() */\n.toggle-switch.checked {\n  background: #1f2937 !important;  /* Black when ON */\n}\n\n/* BMS Status Section */\n.bms-status-section {\n  padding: 20px;\n}\n\n.bms-status-section h2 {\n  margin-bottom: 30px;\n  color: #1e293b;\n}\n\n.status-cards {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));\n  gap: 20px;\n  margin-bottom: 20px;\n}\n\n.status-card {\n  background: white;\n  border-radius: 12px;\n  padding: 20px;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\n  border: 1px solid #e5e7eb;\n}\n\n.status-card h3 {\n  margin: 0 0 20px 0;\n  padding-bottom: 10px;\n  border-bottom: 1px solid #e5e7eb;\n  font-size: 16px;\n  color: #374151;\n}\n\n.status-item {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 8px 0;\n  border-bottom: 1px solid #f3f4f6;\n}\n\n.status-item:last-child {\n  border-bottom: none;\n}\n\n.status-label {\n  font-weight: 500;\n  color: #6b7280;\n  font-size: 14px;\n}\n\n.status-value {\n  font-weight: 600;\n  color: #374151;\n  font-size: 14px;\n}\n\n.status-value.connected,\n.status-value.enabled {\n  color: #10b981;\n}\n\n.status-value.disconnected,\n.status-value.disabled {\n  color: #6b7280;\n}\n/* Input Configuration Items - DUPLICATE REMOVED */\n/* See lines 999-1008 for the main input-config-item styles */\n\n.input-config-item .input-number {\n  min-width: 40px;\n  font-weight: 600;\n  color: #374151;\n}\n\n.input-config-item input[type=\"text\"] {\n  flex: 1;\n  padding: 6px 10px;\n  border: 1px solid #d1d5db;\n  border-radius: 4px;\n  font-size: 13px;\n}\n\n.input-config-item .input-type-select,\n.input-config-item .conversion-select,\n.input-config-item .scaling-select {\n  padding: 6px 8px;\n  border: 1px solid #d1d5db;\n  border-radius: 4px;\n  font-size: 13px;\n  background: white;\n  min-width: 100px;\n}\n\n.input-config-item .scaling-select {\n  min-width: 80px;\n  max-width: 100px;\n  margin-left: -0.5rem;\n}\n\n.board-toggle-container {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 10px;\n  background: #f3f4f6;\n  border-radius: 6px;\n  margin-bottom: 15px;\n}\n\n.board-toggle-container span {\n  font-weight: 500;\n  color: #374151;\n}\n\n/* Fix the output-item spacing for consistency */\n.output-item {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  padding: 8px;\n  background: #f9fafb;\n  border-radius: 6px;\n  margin-bottom: 8px;\n}\n\n.output-item .output-number {\n  min-width: 40px;\n  font-weight: 600;\n  color: #374151;\n}\n\n.output-item input[type=\"text\"] {\n  flex: 1;\n  padding: 6px 10px;\n  border: 1px solid #d1d5db;\n  border-radius: 4px;\n  font-size: 13px;\n}\n",""]);const r=o},5126:(n,e,t)=>{t.d(e,{A:()=>r});var s=t(1601),a=t.n(s),i=t(6314),o=t.n(i)()(a());o.push([n.id,"/* Sleek Switch Component Styles */\n.switch-root {\n  width: 36px;\n  height: 18px;\n  background-color: #d1d5db;\n  border-radius: 9999px;\n  position: relative;\n  box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.2);\n  cursor: pointer;\n  transition: background-color 0.2s ease;\n  border: none;\n  padding: 0;\n}\n\n.switch-root[data-state='checked'] {\n  background-color: #14b8a6;\n}\n\n.switch-root[data-disabled] {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n\n.switch-thumb {\n  display: block;\n  width: 14px;\n  height: 14px;\n  background-color: white;\n  border-radius: 9999px;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);\n  transition: transform 0.2s ease;\n  transform: translateX(2px);\n  will-change: transform;\n}\n\n.switch-thumb[data-state='checked'] {\n  transform: translateX(20px);\n}",""]);const r=o},9506:(n,e,t)=>{t.r(e),t.d(e,{default:()=>P});var s=t(4848),a=t(6540),i=t(418),o=t(2492),r=t(9245),l=t(9907),c=t(964),d=t(6844),p=t(827),u=t(7078),m=t(4796),g=t(180),h=t(8834),x=t(5731),b=t(4471),f=t(116),j=t(1456),v=t(166),y=t(991),w=t(7543),N=t(3661),k=t(1083);function C(n,e,t="unknown"){const[s,i]=(0,a.useState)(e),[o,r]=(0,a.useState)(!0),l=(0,a.useRef)(e),c=(0,a.useRef)(null);return(0,a.useEffect)(()=>{(async()=>{try{const e=sessionStorage.getItem("token");if(!e)return void r(!1);const s=await k.A.get(`/api/ui-state/load/${t}`,{headers:{Authorization:`Bearer ${e}`}});s.data.success&&void 0!==s.data.state[n]&&(i(s.data.state[n]),l.current=s.data.state[n])}catch(n){console.error("Failed to load persisted state:",n)}finally{r(!1)}})()},[n,t]),(0,a.useEffect)(()=>()=>{c.current&&clearTimeout(c.current)},[]),[s,e=>{i(e),(async e=>{c.current&&clearTimeout(c.current),c.current=setTimeout(async()=>{try{const s=sessionStorage.getItem("token");if(!s)return;await k.A.post("/api/ui-state/save",{page:t,stateKey:n,stateValue:e},{headers:{Authorization:`Bearer ${s}`}}),JSON.stringify(l.current)!==JSON.stringify(e)&&(await k.A.post("/api/audit/ui-change",{actionType:"UI_STATE_CHANGE",component:t,description:`Changed ${n} in ${t}`,oldValue:JSON.stringify(l.current),newValue:JSON.stringify(e)},{headers:{Authorization:`Bearer ${s}`}}),l.current=e)}catch(n){console.error("Failed to save state:",n)}},500)})(e)},o]}var A=t(5072),T=t.n(A),S=t(7825),I=t.n(S),E=t(7659),z=t.n(E),$=t(5056),O=t.n($),D=t(540),F=t.n(D),L=t(1113),R=t.n(L),V=t(4193),q={};q.styleTagTransform=R(),q.setAttributes=O(),q.insert=z().bind(null,"head"),q.domAPI=I(),q.insertStyleElement=F(),T()(V.A,q),V.A&&V.A.locals&&V.A.locals;const P=()=>{const[n,e]=C("adminActiveTab","logic","admin"),[t,k]=C("adminSelectedEquipment","","admin"),[A,T]=C("adminLogicEnabled",!1,"admin"),[S,I]=C("adminAutoRunEnabled",!1,"admin"),[E,z]=C("adminPollingInterval",7,"admin"),[$,O]=(0,a.useState)([]),[D,F]=(0,a.useState)(!0),[L,R]=(0,a.useState)(!1),[V,q]=(0,a.useState)(24);!function(){const n=(0,a.useRef)(null);(0,a.useEffect)(()=>(n.current=setInterval(()=>{const n=sessionStorage.getItem("token");if(n)try{const e=1e3*JSON.parse(atob(n.split(".")[1])).exp,t=Date.now();if(e-t<6e4){const n=Math.floor((e-t)/1e3);n>0?console.warn(`Session expires in ${n} seconds`):(sessionStorage.clear(),window.location.href="/login")}}catch(n){console.error("Failed to decode token:",n)}},3e4),()=>{n.current&&clearInterval(n.current)}),[])}();const[P,U]=(0,a.useState)(null),[B,_]=(0,a.useState)(""),[M,H]=(0,a.useState)(!1),[W,J]=(0,a.useState)(""),[G,K]=(0,a.useState)([]),[Y,Z]=(0,a.useState)(!1),[X,Q]=(0,a.useState)(!1),[nn,en]=(0,a.useState)(""),[tn,sn]=(0,a.useState)([]),[an,on]=(0,a.useState)([]),rn=(0,a.useRef)(null),ln=(0,a.useRef)(null),cn=(0,a.useRef)(null),[dn,pn]=(0,a.useState)(null),[un,mn]=(0,a.useState)(null),[gn,hn]=(0,a.useState)(!1),xn=(0,a.useRef)(null),[bn,fn]=(0,a.useState)([]),[jn,vn]=(0,a.useState)({connected:!1,lastPing:"Never",latency:0,usingLocalFile:!1,logicFileStatus:"none"}),[yn,wn]=(0,a.useState)(!1),[Nn,kn]=C("nodeRedIntegrationEnabled",!1,"admin"),[Cn,An]=(0,a.useState)([]);(0,a.useEffect)(()=>{if(Tn(),"audit"===n)Sn();else if("boards"===n)En();else{if("status"===n){zn();const n=setInterval(zn,2e4);return()=>clearInterval(n)}"logic"===n?(On(),In(),t?Ln():On().then(()=>{})):"pid"===n&&$n()}return()=>{}},[n,V]),(0,a.useEffect)(()=>S&&t?(Dn(),ln.current=setInterval(Dn,1e4),()=>{ln.current&&(clearInterval(ln.current),ln.current=null)}):(sn([]),ln.current&&(clearInterval(ln.current),ln.current=null),()=>{}),[S,t]),(0,a.useEffect)(()=>"logic"===n&&B&&B.includes("processCoolingTowerControl")?(Fn(),cn.current=setInterval(Fn,15e3),()=>{cn.current&&(clearInterval(cn.current),cn.current=null)}):()=>{},[n,B]);const Tn=()=>{const n=sessionStorage.getItem("authToken");if(n)try{const e=JSON.parse(atob(n.split(".")[1]));R("admin"===e.role)}catch(n){console.error("Error parsing token:",n),R(!1)}},Sn=async()=>{F(!0);try{const n=await(0,N.U)(`/api/audit/logs?hours=${V}`);if(n.ok){const e=await n.json();O(e)}}catch(n){console.error("Error fetching audit logs:",n)}finally{F(!1)}},In=async()=>{try{const n=await(0,N.U)("/api/logic/boards");if(n.ok){const e=await n.json();if(e&&e.length>0){const n={megabasInputs:[],megabasTriacs:[],megabasAnalogOutputs:[],input16Channels:[],relay16Channels:[],systemComponents:[],sensorSpecs:{}};e.forEach(e=>{"megabas"===e.boardType?(e.outputs&&Object.entries(e.outputs).forEach(([e,t])=>{const s=parseInt(e);"triac"===t.type?n.megabasTriacs.push({channel:s,name:t.name,type:"24VAC Triac"}):"0-10V"===t.type&&s>4&&n.megabasAnalogOutputs.push({channel:s-4,name:t.name,type:"0-10V",range:"0-10V"})}),e.inputs&&Object.entries(e.inputs).forEach(([e,t])=>{n.megabasInputs.push({channel:parseInt(e),name:t.name,type:"0-10V",conversion:t.conversionType,range:t.scaling?`0-${t.scaling.split("-")[1]}A`:"0-10V",scaling:t.scaling})})):"16univin"===e.boardType&&e.inputs?Object.entries(e.inputs).forEach(([e,t])=>{n.input16Channels.push({channel:parseInt(e),name:t.name,type:t.inputType,conversion:t.conversionType,range:t.inputType,scaling:t.scaling})}):"16relind"===e.boardType&&e.outputs&&Object.entries(e.outputs).forEach(([e,t])=>{n.relay16Channels.push({channel:parseInt(e),name:t.name,type:"relay"})})}),mn(n),console.log("Loaded saved board configuration")}}}catch(n){console.error("Error fetching saved board config:",n)}},En=async()=>{try{const n=await(0,N.U)("/api/logic/boards");if(n.ok){const e=await n.json();if(e&&e.length>0)return fn(e),void console.log("Loaded saved board configurations:",e)}const e=await(0,N.U)("/api/boards/detect");if(e.ok){const n=await e.json(),t=[];n.megabas&&t.push({boardType:"megabas",stackAddress:0,enabled:!0,outputs:{},inputs:{}}),n.input16&&t.push({boardType:"16univin",stackAddress:0,enabled:!0,outputs:{},inputs:{}}),n.relay16&&t.push({boardType:"16relind",stackAddress:0,enabled:!0,outputs:{}}),n.relay8&&t.push({boardType:"8relind",stackAddress:0,enabled:!0,outputs:{}}),fn(t)}}catch(n){console.error("Error fetching board configs:",n)}},zn=async()=>{try{const n=await(0,N.U)("/api/logic/bms-status");if(n.ok){const e=await n.json();vn(e),wn(e.enabled||!1)}}catch(n){console.error("Error fetching BMS status:",n)}},$n=async()=>{try{const n=await(0,N.U)("/api/pid-controllers");if(n.ok){const e=await n.json();An(e||[])}else console.error("Failed to fetch PID controllers"),An([])}catch(n){console.error("Error fetching PID controllers:",n),An([])}},On=async()=>{try{const n=await(0,N.U)("/api/logic/equipment-list");if(n.ok){const e=await n.json();if(K(e),!t&&e.length>0){const n=e.find(n=>n.hasLogic);if(n){k(n.id);const e=await(0,N.U)(`/api/logic/current/${n.id}`);if(e.ok){const t=await e.text();_(t),en(t),Q(!1);const s=await(0,N.U)(`/api/logic/config/${n.id}`);if(s.ok){const n=await s.json();T(n.enabled||!1),I(n.autoRunEnabled||!1),z(n.pollingInterval||7),Z(!1)}}}}}}catch(n){console.error("Error fetching equipment list:",n)}},Dn=async()=>{if(t&&S)try{const n=await(0,N.U)(`/api/logic/results/${t}`);if(n.ok){const e=await n.json();sn(e)}}catch(n){console.error("Error fetching logic results:",n)}},Fn=async()=>{try{const n=await(0,N.U)("/api/logic/execution-results");if(n.ok){const e=await n.json();on(e)}}catch(n){console.error("Error fetching execution results:",n)}},Ln=async()=>{if(t)try{const n=await(0,N.U)(`/api/logic/current/${t}`);if(n.ok){const e=await n.text();_(e),en(e),Q(!1)}else 404===n.status&&(_(""),en(""));const e=await(0,N.U)(`/api/logic/config/${t}`);if(e.ok){const n=await e.json();T(n.enabled||!1),I(n.autoRunEnabled||!1),z(n.pollingInterval||7),Z(!1),n.autoRunEnabled&&Dn()}}catch(n){console.error("Error fetching current logic:",n)}},Rn=async(n,e,t)=>{const s=[...bn];if("type"===e)s[n].boardType=t,s[n].outputs={},s[n].inputs={};else if("enabled"===e)s[n].enabled=t;else if(e.startsWith("output_")){const a=parseInt(e.split("_")[1]);s[n].outputs[a]||(s[n].outputs[a]={name:"",type:"",enabled:!1});const i=e.split("_")[2];"name"===i||"type"===i?s[n].outputs[a][i]=t:"enabled"===i&&(s[n].outputs[a].enabled=t)}else if(e.startsWith("input_")){const a=parseInt(e.split("_")[1]);s[n].inputs||(s[n].inputs={}),s[n].inputs[a]||(s[n].inputs[a]={name:"",inputType:"0-10V",conversionType:"temperature",enabled:!1});const i=e.split("_")[2];"name"===i?s[n].inputs[a].name=t:"type"===i?s[n].inputs[a].inputType=t:"conversion"===i?s[n].inputs[a].conversionType=t:"scaling"===i?s[n].inputs[a].scaling=t:"enabled"===i&&(s[n].inputs[a].enabled=t)}fn(s);try{await(0,N.U)("/api/logic/boards",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)})}catch(n){console.error("Error saving board config:",n)}},Vn=async(n,e,t)=>{const s=[...Cn];s[n]={...s[n],[e]:t},An(s);try{const a=s[n];await(0,N.U)(`/api/pid-controllers/${a.equipmentId}/${a.controllerType}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({[e]:t})})}catch(n){console.error("Error saving PID config:",n)}},qn=n=>{if(!n)return"📝";switch(n.toUpperCase()){case"LOGIN":return"🔐";case"LOGOUT":return"🚪";case"CREATE":return"➕";case"UPDATE":return"✏️";case"DELETE":return"🗑️";case"VIEW":return"👁️";default:return"📝"}};return L?(0,s.jsx)(w.A,{children:(0,s.jsxs)("div",{className:"admin-container",children:[(0,s.jsxs)("div",{className:"admin-header",children:[(0,s.jsxs)("div",{className:"admin-title",children:[(0,s.jsx)(o.A,{size:28}),(0,s.jsx)("h1",{children:"System Administration"})]}),(0,s.jsx)("div",{className:"admin-subtitle",children:"Advanced Configuration & Monitoring"})]}),(0,s.jsxs)("div",{className:"admin-tabs",children:[(0,s.jsxs)("button",{className:"tab-button "+("logic"===n?"active":""),onClick:()=>e("logic"),children:[(0,s.jsx)(r.A,{size:18}),(0,s.jsx)("span",{children:"Logic Engine"})]}),(0,s.jsxs)("button",{className:"tab-button "+("pid"===n?"active":""),onClick:()=>e("pid"),children:[(0,s.jsx)(l.A,{size:18}),(0,s.jsx)("span",{children:"PID Controllers"})]}),(0,s.jsxs)("button",{className:"tab-button "+("boards"===n?"active":""),onClick:()=>e("boards"),children:[(0,s.jsx)(c.A,{size:18}),(0,s.jsx)("span",{children:"Board Config"})]}),(0,s.jsxs)("button",{className:"tab-button "+("status"===n?"active":""),onClick:()=>e("status"),children:[(0,s.jsx)(d.A,{size:18}),(0,s.jsx)("span",{children:"BMS Status"})]}),(0,s.jsxs)("button",{className:"tab-button "+("audit"===n?"active":""),onClick:()=>e("audit"),children:[(0,s.jsx)(p.A,{size:18}),(0,s.jsx)("span",{children:"Audit Logs"})]}),(0,s.jsxs)("button",{className:"tab-button "+("security"===n?"active":""),onClick:()=>e("security"),children:[(0,s.jsx)(u.A,{size:18}),(0,s.jsx)("span",{children:"Security"})]})]}),(0,s.jsxs)("div",{className:"admin-content",children:["logic"===n&&(0,s.jsxs)("div",{className:"logic-section",children:[(0,s.jsx)("h2",{children:"Equipment Configuration & Logic Control"}),(0,s.jsxs)("div",{className:"section",style:{background:"#f0f9ff",padding:"20px",borderRadius:"8px",marginBottom:"20px",border:"2px solid #0ea5e9"},children:[(0,s.jsx)("h3",{style:{marginTop:0,color:"#0c4a6e"},children:"Hardware Configuration Import"}),(0,s.jsx)("p",{style:{color:"#64748b",marginBottom:"15px"},children:"Upload a hardware configuration HTML file to automatically configure I/O assignments, sensor types, and device names."}),(0,s.jsxs)("div",{style:{display:"flex",gap:"15px",alignItems:"center",marginBottom:"15px"},children:[(0,s.jsx)("input",{ref:xn,type:"file",accept:".html",onChange:n=>{const e=n.target.files?.[0];if(e&&e.name.endsWith(".html")){pn(e);const n=new FileReader;n.onload=n=>{const e=n.target?.result,t=(n=>{try{const e=(new DOMParser).parseFromString(n,"text/html"),t={projectInfo:{},megabasInputs:[],megabasTriacs:[],megabasAnalogOutputs:[],input16Channels:[],relay16Channels:[],systemComponents:[],sensorSpecs:{},equipmentIds:[]},s=e.querySelector(".header")?.textContent||"",a=s.match(/Project:\s*([^|]+)/),i=s.match(/Date:\s*([^|]+)/),o=s.match(/Contractor:\s*([^|]+)/);t.projectInfo={project:a?a[1].trim():"",date:i?i[1].trim():"",contractor:o?o[1].trim():""};const r=e.querySelectorAll(".io-table");console.log(`Found ${r.length} I/O tables in HTML`),r.forEach((n,e)=>{const s=n.querySelectorAll("tr"),a=s[0],i=a?.textContent||"";if(console.log(`Table ${e}: Headers = ${i}`),i.includes("Equipment ID"))return void s.forEach((n,e)=>{if(0===e)return;const s=n.querySelectorAll("td");if(s.length>=2){const n=s[0]?.textContent?.trim(),e=s[1]?.textContent?.trim();e&&20===e.length&&(t.equipmentIds?.push(e),console.log(`Found equipment: ${n} - ${e}`))}});const o=i.includes("BAU")||i.includes("Building Automation"),r=i.includes("16Input")||i.includes("16 Input"),l=i.includes("16Relay")||i.includes("16 Relay");console.log(`Processing table - BAU: ${o}, 16Input: ${r}, 16Relay: ${l}`),s.forEach((n,e)=>{if(0===e)return;const s=n.querySelectorAll("td");if(s.length>=6){const n=s[0]?.textContent?.trim(),e=s[1]?.textContent?.trim();if(n&&e&&""!==n&&""!==e)if(n.match(/T\d+-T\d+|T\d+/)){const s=n.match(/T(\d+)(?:-T(\d+))?/);if(s){const n=parseInt(s[1]),a=s[2]?parseInt(s[2]):n;for(let s=n;s<=a;s++)t.megabasTriacs.push({channel:s,name:e,type:"24VAC Triac"})}}else if(n.match(/AO\d+(?:-AO\d+)?/)){const s=n.match(/AO(\d+)(?:-AO(\d+))?/);if(s){const n=parseInt(s[1]),a=s[2]?parseInt(s[2]):n;for(let s=n;s<=a;s++)t.megabasAnalogOutputs.push({channel:s,name:e.includes("Speed")?`VFD ${s} Speed`:e,type:"0-10V",range:"0-10V"})}}else if(n.match(/AI\d+(?:-AI\d+)?/)){const s=n.match(/AI(\d+)(?:-AI(\d+))?/);if(s){const n=parseInt(s[1]),a=s[2]?parseInt(s[2]):n;for(let s=n;s<=a;s++){const n=e.includes("Current")||e.includes("0-50A"),a=e.includes("VFD")?e:`VFD Current ${s}`;t.megabasInputs.push({channel:s,name:a,type:"0-10V",conversion:n?"amps":"voltage",range:e.includes("0-50A")?"0-50A":"0-10V",scaling:n?"0-50":void 0}),console.log(`Added MegaBAS AI${s}: ${a} (${n?"current sensor 0-50A":"0-10V voltage"})`)}}}const a=s[2]?.textContent?.trim(),i=s[3]?.textContent?.trim();if(a&&i&&""!==a){let n=a.match(/CH(\d+)(?:-CH(\d+))?/);if(n||(n=a.match(/(\d+)(?:-(\d+))?/)),n){const e=parseInt(n[1]),s=n[2]?parseInt(n[2]):e;for(let n=e;n<=s;n++){let e,s="0-10V",a="voltage";i.includes("RTD")||i.includes("Temp")||i.includes("Temperature")?(s="1k",a="temperature"):i.includes("Current")||i.includes("Amps")?(s="0-10V",a="amps",e=i.includes("0-50A")?"0-50":i.includes("0-20A")?"0-20":i.includes("0-100A")?"0-100":"0-50"):i.includes("Pressure")&&(s="0-10V",a="pressure");const o={channel:n,name:i,type:s,conversion:a,range:s};e&&(o.scaling=e),t.input16Channels.push(o),console.log(`Added 16-Input CH${n}: ${i} (${s}/${a})`)}}}const o=s[4]?.textContent?.trim(),r=s[5]?.textContent?.trim();if(o&&r){const n=o.match(/CH(\d+)(?:-(\d+))?/);if(n){const e=parseInt(n[1]),s=n[2]?parseInt(n[2]):e;for(let n=e;n<=s;n++)t.relay16Channels.push({channel:n,name:r,type:"relay"})}}}else if(4===s.length){const n=s[0]?.textContent?.trim(),e=s[1]?.textContent?.trim(),a=s[2]?.textContent?.trim(),i=s[3]?.textContent?.trim();if(n&&e&&""!==n)if(n.match(/T\d+|AO\d+|AI\d+/)){const s=n,a=e;if(s&&a)if(s.startsWith("T"))s.replace("T","").split("-").forEach(n=>{n.trim()&&t.megabasTriacs.push({channel:parseInt(n.trim()),name:a,type:"24VAC Triac"})});else if(s.startsWith("AO")){const n=s.match(/AO(\d+)(?:-AO(\d+))?/);if(n){const e=parseInt(n[1]),s=n[2]?parseInt(n[2]):e;for(let n=e;n<=s;n++)t.megabasAnalogOutputs.push({channel:n,name:a.includes("Speed")?`VFD ${n} Speed`:a,type:"0-10V",range:(a.includes("Speed"),"0-10V")})}}else if(s.startsWith("AI")){const n=s.match(/AI(\d+)(?:-AI(\d+))?/);if(n){const e=parseInt(n[1]),s=n[2]?parseInt(n[2]):e;for(let n=e;n<=s;n++)t.megabasInputs.push({channel:n,name:a.includes("Current")?`VFD Current ${n}`:a,type:(a.includes("Current"),"0-10V"),conversion:a.includes("Current")?"current":"voltage",range:a.includes("0-50A")?"0-50A":"0-10V"})}}}else if(n.match(/CH\d+|\d+/)){const s=n,a=e;let i=s.match(/CH(\d+)(?:-CH(\d+))?/);if(i||(i=s.match(/(\d+)(?:-(\d+))?/)),i){const n=parseInt(i[1]),e=i[2]?parseInt(i[2]):n;for(let s=n;s<=e;s++){let n="0-10V",e="voltage";a.includes("RTD")||a.includes("Temp")||a.includes("Temperature")?(n="1k",e="temperature"):(a.includes("Current")||a.includes("Amps"))&&(n="0-10V",e="current"),t.input16Channels.push({channel:s,name:a,type:n,conversion:e,range:a.includes("0-50A")?"0-50A":n}),console.log(`Added 16-Input CH${s}: ${a} (${n}/${e})`)}}}if(a&&i&&""!==a&&a.match(/CH\d+|\d+/)){let n=a.match(/CH(\d+)(?:-CH(\d+))?/);if(n||(n=a.match(/(\d+)(?:-(\d+))?/)),n){const e=parseInt(n[1]),s=n[2]?parseInt(n[2]):e;if(i.includes("Relay")||i.includes("Heater")||i.includes("Pump"))for(let n=e;n<=s;n++)t.relay16Channels.push({channel:n,name:i,type:"relay"}),console.log(`Added 16-Relay CH${n}: ${i}`);else for(let n=e;n<=s;n++){let e="0-10V",s="voltage";(i.includes("RTD")||i.includes("Temp"))&&(e="1k",s="temperature"),t.input16Channels.push({channel:n,name:i,type:e,conversion:s,range:e}),console.log(`Added 16-Input CH${n}: ${i} (${e}/${s})`)}}}}else if(2===s.length){const n=s[0]?.textContent?.trim(),e=s[1]?.textContent?.trim();if(n&&e&&""!==n)if(n.match(/T\d+/)){const s=n.match(/T(\d+)(?:-T(\d+))?/);if(s){const n=parseInt(s[1]),a=s[2]?parseInt(s[2]):n;for(let s=n;s<=a;s++)t.megabasTriacs.push({channel:s,name:e,type:"24VAC Triac"})}}else if(n.match(/AO\d+/)){const s=n.match(/AO(\d+)(?:-AO(\d+))?/);if(s){const n=parseInt(s[1]),a=s[2]?parseInt(s[2]):n;for(let s=n;s<=a;s++)t.megabasAnalogOutputs.push({channel:s,name:e,type:"0-10V",range:"0-10V"})}}else if(n.match(/AI\d+/)){const s=n.match(/AI(\d+)(?:-AI(\d+))?/);if(s){const n=parseInt(s[1]),a=s[2]?parseInt(s[2]):n;for(let s=n;s<=a;s++){const n=e.includes("Current")||e.includes("Amps")||e.includes("0-50A");t.megabasInputs.push({channel:s,name:e,type:"0-10V",conversion:n?"current":"voltage",range:e.includes("0-50A")?"0-50A":e.includes("0-20A")?"0-20A":e.includes("0-100A")?"0-100A":"0-10V"}),console.log(`Added MegaBAS AI${s}: ${e} (${n?"current":"voltage"})`)}}}else if(n.match(/CH\d+|^\d+$/)){let s=n.match(/CH(\d+)(?:-CH(\d+))?/);if(s||(s=n.match(/^(\d+)(?:-(\d+))?$/)),s){const n=parseInt(s[1]),a=s[2]?parseInt(s[2]):n;if(e.includes("Relay")||e.includes("Heater")||e.includes("Pump")||e.includes("Valve"))for(let s=n;s<=a;s++)t.relay16Channels.push({channel:s,name:e,type:"relay"}),console.log(`Added 16-Relay CH${s}: ${e}`);else for(let s=n;s<=a;s++){let n="0-10V",a="voltage";e.includes("RTD")||e.includes("Temp")||e.includes("Temperature")?(n="1k",a="temperature"):e.includes("Current")||e.includes("Amps")?(n="0-10V",a="current"):e.includes("Pressure")&&(n="0-10V",a="pressure"),t.input16Channels.push({channel:s,name:e,type:n,conversion:a,range:e.includes("0-50A")?"0-50A":e.includes("0-20A")?"0-20A":e.includes("0-100A")?"0-100A":n}),console.log(`Added 16-Input CH${s}: ${e} (${n}/${a})`)}}}}})});const l=e.querySelector(".notes")?.textContent||"";l.includes("0-10VDC")&&l.includes("0-50A")&&(t.sensorSpecs.currentSensors="0-10VDC (0V=0A, 10V=50A)"),l.includes("1K Platinum RTD")&&(t.sensorSpecs.tempSensors="1K Platinum RTD"),e.querySelectorAll("ul li").forEach(n=>{const e=n.textContent||"";(e.includes("VFD")||e.includes("Pump")||e.includes("Sensor")||e.includes("Valve")||e.includes("Heater"))&&t.systemComponents.push(e.trim())});const c=/[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}/gi,d=(e.body?.textContent||"").match(c)||[];return e.querySelectorAll("[data-equipment-id], [data-tower-id], .equipment-id, .tower-id").forEach(n=>{const e=n.getAttribute("data-equipment-id")||n.getAttribute("data-tower-id")||n.textContent?.match(c)?.[0];e&&!t.equipmentIds?.includes(e)&&t.equipmentIds?.push(e)}),d.forEach(n=>{t.equipmentIds?.includes(n)||t.equipmentIds?.push(n)}),e.querySelectorAll("td").forEach(n=>{const e=n.textContent||"";if(e.includes("Tower")&&e.includes("UUID")){const n=e.match(c);n&&n.forEach(n=>{t.equipmentIds?.includes(n)||t.equipmentIds?.push(n)})}}),console.log(`Extracted ${t.equipmentIds?.length||0} equipment IDs from configuration`),(n=>{if(!n||!n.megabasAnalogOutputs)return;const e=[];n.megabasAnalogOutputs.forEach(n=>{const t=n.name.toLowerCase();let s={name:n.name,enabled:!1,setpoint:72,kp:2,ki:.5,kd:.1,minV:0,maxV:10,reverseActing:!1,output:0,outputChannel:`AO${n.channel}`,processVariable:""};t.includes("bypass")?(s.name=n.name||`Bypass Valve (AO${n.channel})`,s.setpoint=70,s.kp=2.5,s.ki=.3,s.kd=.1,s.processVariable="CH1"):t.includes("vfd")||t.includes("speed")||t.includes("fan")?(s.name=n.name||`VFD Speed (AO${n.channel})`,s.setpoint=75,s.kp=1.5,s.ki=.2,s.kd=.05,t.includes("tower")||t.includes("cell")?(s.minV=4,s.maxV=5.5):(s.minV=2,s.maxV=10),s.processVariable="CH2"):t.includes("damper")||t.includes("oa")||t.includes("outside")?(s.name=n.name||`OA Damper (AO${n.channel})`,s.setpoint=72,s.kp=2,s.ki=.5,s.kd=.1,s.minV=2,s.maxV=10,s.processVariable="AI1"):t.includes("hw")||t.includes("hot")||t.includes("heat")?(s.name=n.name||`HW Valve (AO${n.channel})`,s.setpoint=72,s.kp=3,s.ki=.8,s.kd=.2,s.reverseActing=!0,s.processVariable="AI2"):t.includes("cw")||t.includes("chilled")||t.includes("cool")?(s.name=n.name||`CW Valve (AO${n.channel})`,s.setpoint=72,s.kp=2.5,s.ki=.6,s.kd=.15,s.reverseActing=!1,s.processVariable="AI2"):t.includes("valve")?(s.name=n.name||`Control Valve (AO${n.channel})`,s.kp=2.5,s.ki=.5,s.kd=.1,s.processVariable="AI1"):(s.name=n.name||`Analog Output ${n.channel}`,s.processVariable="AI1"),e.push(s)}),An(e),console.log(`Auto-configured ${e.length} PID controllers from hardware config`)})(t),t}catch(n){return console.error("Error parsing hardware config HTML:",n),null}})(e);t?(mn(t),hn(!0)):alert("Failed to parse configuration HTML file")},n.readAsText(e)}else alert("Please select a valid .html configuration file")},style:{display:"none"}}),(0,s.jsxs)("button",{className:"btn-primary",onClick:()=>xn.current?.click(),style:{background:un?"#10b981":"#0ea5e9",color:"white"},children:[(0,s.jsx)(m.A,{size:14}),un?"Config Loaded - Change File":"Select Config HTML"]}),(dn||un)&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{style:{color:"#374151",fontWeight:500},children:dn?.name||"Configuration Applied"}),(0,s.jsxs)("button",{className:"btn-remove",onClick:()=>{pn(null),mn(null)},title:"Remove configuration",children:[(0,s.jsx)(g.A,{size:14}),"Remove"]})]})]}),gn&&un&&(0,s.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:(0,s.jsxs)("div",{style:{background:"white",borderRadius:"12px",padding:"30px",maxWidth:"800px",maxHeight:"80vh",overflow:"auto",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},children:[(0,s.jsx)("h3",{style:{marginTop:0,marginBottom:"20px"},children:"Hardware Configuration Preview"}),un.projectInfo&&(0,s.jsxs)("div",{style:{marginBottom:"20px",padding:"10px",background:"#f9fafb",borderRadius:"6px"},children:[(0,s.jsx)("h4",{style:{margin:"0 0 10px 0",color:"#374151"},children:"Project Information"}),(0,s.jsxs)("p",{style:{margin:"5px 0"},children:["Project: ",un.projectInfo.project]}),(0,s.jsxs)("p",{style:{margin:"5px 0"},children:["Date: ",un.projectInfo.date]}),(0,s.jsxs)("p",{style:{margin:"5px 0"},children:["Contractor: ",un.projectInfo.contractor]})]}),un.megabasTriacs.length>0&&(0,s.jsxs)("div",{style:{marginBottom:"15px"},children:[(0,s.jsx)("h4",{style:{color:"#374151"},children:"MegaBAS Triacs"}),(0,s.jsx)("ul",{style:{margin:"5px 0"},children:un.megabasTriacs.map((n,e)=>(0,s.jsxs)("li",{children:["T",n.channel,": ",n.name]},e))})]}),un.megabasAnalogOutputs.length>0&&(0,s.jsxs)("div",{style:{marginBottom:"15px"},children:[(0,s.jsx)("h4",{style:{color:"#374151"},children:"MegaBAS Analog Outputs"}),(0,s.jsx)("ul",{style:{margin:"5px 0"},children:un.megabasAnalogOutputs.map((n,e)=>(0,s.jsxs)("li",{children:["AO",n.channel,": ",n.name," (",n.type,")"]},e))})]}),un.megabasInputs.length>0&&(0,s.jsxs)("div",{style:{marginBottom:"15px"},children:[(0,s.jsx)("h4",{style:{color:"#374151"},children:"MegaBAS Inputs"}),(0,s.jsx)("ul",{style:{margin:"5px 0"},children:un.megabasInputs.map((n,e)=>(0,s.jsxs)("li",{children:["AI",n.channel,": ",n.name," (",n.range,")"]},e))})]}),un.input16Channels.length>0&&(0,s.jsxs)("div",{style:{marginBottom:"15px"},children:[(0,s.jsx)("h4",{style:{color:"#374151"},children:"16-Input Channels"}),(0,s.jsx)("ul",{style:{margin:"5px 0"},children:un.input16Channels.map((n,e)=>(0,s.jsxs)("li",{children:["CH",n.channel,": ",n.name," (",n.type,")"]},e))})]}),un.relay16Channels.length>0&&(0,s.jsxs)("div",{style:{marginBottom:"15px"},children:[(0,s.jsx)("h4",{style:{color:"#374151"},children:"16-Relay Outputs"}),(0,s.jsx)("ul",{style:{margin:"5px 0"},children:un.relay16Channels.map((n,e)=>(0,s.jsxs)("li",{children:["Relay ",n.channel,": ",n.name]},e))})]}),(0,s.jsxs)("div",{style:{display:"flex",gap:"10px",justifyContent:"flex-end",marginTop:"20px"},children:[(0,s.jsx)("button",{className:"btn-cancel",onClick:()=>{hn(!1),mn(null)},children:"Cancel"}),(0,s.jsx)("button",{className:"btn-success",onClick:async()=>{if(un)try{const n=[];if(un.megabasInputs.length>0||un.megabasTriacs.length>0||un.megabasAnalogOutputs.length>0){const e={boardType:"megabas",stackAddress:0,enabled:!0,outputs:{},inputs:{}};un.megabasTriacs.forEach(n=>{e.outputs[n.channel]={name:n.name,type:"triac",enabled:!0}}),un.megabasAnalogOutputs.forEach(n=>{e.outputs[n.channel+4]={name:n.name,type:"0-10V",enabled:!0}}),un.megabasInputs.forEach(n=>{const t={name:n.name,inputType:"0-10V",conversionType:"amps"===n.conversion?"amps":"voltage",enabled:!0};n.scaling&&(t.scaling=n.scaling),e.inputs[n.channel]=t,console.log(`Configured MegaBAS input ${n.channel}: ${n.name} as ${t.conversionType}${n.scaling?" with scaling "+n.scaling:""}`)}),n.push(e)}if(un.input16Channels.length>0){const e={boardType:"16univin",stackAddress:0,enabled:!0,outputs:{},inputs:{}};un.input16Channels.forEach(n=>{const t={name:n.name,inputType:"1k"===n.type?"1k":"0-10V",conversionType:"temperature"===n.conversion?"temperature":"amps"===n.conversion?"amps":"voltage",enabled:!0};n.scaling&&(t.scaling=n.scaling),e.inputs[n.channel]=t,console.log(`Configured 16-Input CH${n.channel}: ${n.name} as ${n.type}/${t.conversionType}${n.scaling?" with scaling "+n.scaling:""}`)}),n.push(e)}if(un.relay16Channels.length>0){const e={boardType:"16relind",stackAddress:0,enabled:!0,outputs:{},inputs:{}};un.relay16Channels.forEach(n=>{e.outputs[n.channel]={name:n.name,type:"relay",enabled:!0}}),n.push(e)}fn(n),(await(0,N.U)("/api/logic/boards",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)})).ok?(alert("Hardware configuration applied successfully!"),hn(!1),pn(null),mn(null),e("boards")):alert("Failed to save hardware configuration")}catch(n){console.error("Error applying configuration:",n),alert("Error applying hardware configuration")}},children:"Apply Configuration"})]})]})})]}),(0,s.jsx)("h3",{children:"Equipment Logic Files (Failover Control)"}),(0,s.jsxs)("div",{className:"equipment-selector",children:[(0,s.jsx)("label",{children:"Equipment ID Configuration:"}),(0,s.jsxs)("div",{style:{display:"flex",gap:"10px",alignItems:"flex-start",marginBottom:"10px"},children:[(0,s.jsxs)("div",{style:{flex:1},children:[(0,s.jsx)("input",{type:"text",value:t,onChange:n=>{k(n.target.value),Z(!0)},placeholder:"Enter equipment UUID(s) - comma separated for multiple towers",style:{width:"100%",padding:"10px 12px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"14px",fontFamily:"monospace",background:B?"white":"#f9fafb"},disabled:!B}),(0,s.jsx)("small",{style:{color:"#6b7280",display:"block",marginTop:"5px"},children:un&&un.equipmentIds?`Extracted IDs from config: ${un.equipmentIds.join(", ")}`:"Equipment UUIDs will be extracted from config HTML file or enter manually"})]}),(0,s.jsx)("button",{className:"btn-secondary",onClick:()=>{const n=t.split(",").map(n=>n.trim()).filter(n=>n);n.length>0?alert(`Equipment IDs configured:\n${n.map((n,e)=>`Tower ${e+1}: ${n}`).join("\n")}`):alert("Please enter at least one equipment ID")},style:{background:"#6b7280",color:"white",padding:"10px 16px",borderRadius:"6px",border:"none",cursor:"pointer",fontSize:"14px",fontWeight:500},disabled:!B,children:"Validate IDs"})]}),un&&un.equipmentIds&&(0,s.jsxs)("div",{style:{marginTop:"10px",padding:"12px",background:"#f0f9ff",borderRadius:"6px",border:"1px solid #0ea5e9"},children:[(0,s.jsx)("h4",{style:{margin:"0 0 8px 0",fontSize:"14px",color:"#0c4a6e"},children:"Equipment IDs from Configuration:"}),(0,s.jsx)("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:un.equipmentIds?.map((n,e)=>(0,s.jsxs)("button",{onClick:()=>{k(un.equipmentIds?.join(", ")||""),alert(`Loaded ${un.equipmentIds?.length||0} equipment IDs from configuration`)},style:{padding:"6px 12px",background:"#0ea5e9",color:"white",border:"none",borderRadius:"4px",fontSize:"12px",cursor:"pointer",fontFamily:"monospace"},children:["Tower ",e+1,": ",n.substring(0,8),"..."]},n))}),(0,s.jsx)("button",{onClick:()=>{k(un.equipmentIds?.join(", ")||"")},style:{marginTop:"10px",padding:"8px 16px",background:"#0ea5e9",color:"white",border:"none",borderRadius:"6px",fontSize:"14px",cursor:"pointer",fontWeight:500},children:"Use All IDs from Config"})]}),!B&&(0,s.jsx)("div",{className:"equipment-info",children:(0,s.jsx)("small",{children:"Upload a logic file first to configure equipment IDs"})})]}),G.length>0&&(0,s.jsxs)("div",{className:"existing-equipment",children:[(0,s.jsx)("h4",{children:"Equipment with Local Logic Files:"}),(0,s.jsx)("div",{className:"equipment-grid",children:G.filter(n=>n.hasLogic).map(n=>(0,s.jsxs)("button",{className:"equipment-card "+(t===n.id?"selected":""),onClick:()=>{k(n.id),Ln()},children:[(0,s.jsxs)("span",{className:"equipment-id",children:[n.name," (",n.id.substring(0,8),"...)"]}),(0,s.jsx)("span",{className:"equipment-status",children:"✓ Logic Uploaded"})]},n.id))})]}),(0,s.jsxs)("div",{className:"logic-controls",children:[(0,s.jsx)("div",{className:"logic-enable-toggle",children:(0,s.jsxs)("label",{className:"toggle-container",children:[(0,s.jsx)("span",{className:"toggle-label-text",children:"Logic Execution:"}),(0,s.jsxs)("label",{className:"toggle-switch large",children:[(0,s.jsx)("input",{type:"checkbox",checked:A,onChange:n=>{T(n.target.checked),Z(!0)},disabled:!t}),(0,s.jsx)("span",{className:"toggle-slider"})]}),(0,s.jsx)("span",{className:"status-text "+(A?"enabled":"disabled"),children:A?"ENABLED":"DISABLED"})]})}),(0,s.jsxs)("div",{className:"auto-run-controls",children:[(0,s.jsxs)("label",{className:"toggle-container",children:[(0,s.jsx)("span",{className:"toggle-label-text",children:"Auto-Run Logic:"}),(0,s.jsxs)("label",{className:"toggle-switch",children:[(0,s.jsx)("input",{type:"checkbox",checked:S,onChange:async()=>{const n=!S;I(n),Z(!0);try{(await(0,N.U)("/api/logic/auto-run",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({enabled:n,interval:E})})).ok&&Z(!1)}catch(n){console.error("Error toggling auto-run:",n)}},disabled:!A}),(0,s.jsx)("span",{className:"toggle-slider"})]}),(0,s.jsx)("span",{className:"status-text "+(S?"enabled":"disabled"),children:S?"RUNNING":"STOPPED"})]}),S&&(0,s.jsxs)("div",{className:"polling-interval-selector",children:[(0,s.jsx)("label",{children:"Run Interval:"}),(0,s.jsxs)("select",{value:E,onChange:n=>(async n=>{if(z(n),Z(!0),S)try{(await(0,N.U)("/api/logic/auto-run",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({enabled:S,interval:n})})).ok&&Z(!1)}catch(n){console.error("Error updating polling interval:",n)}})(Number(n.target.value)),className:"interval-select",children:[(0,s.jsx)("option",{value:7,children:"7 seconds"}),(0,s.jsx)("option",{value:12,children:"12 seconds"}),(0,s.jsx)("option",{value:15,children:"15 seconds"}),(0,s.jsx)("option",{value:20,children:"20 seconds"}),(0,s.jsx)("option",{value:30,children:"30 seconds"}),(0,s.jsx)("option",{value:45,children:"45 seconds"}),(0,s.jsx)("option",{value:60,children:"1 minute"}),(0,s.jsx)("option",{value:300,children:"5 minutes"}),(0,s.jsx)("option",{value:900,children:"15 minutes"})]})]})]}),Y&&(0,s.jsx)("div",{className:"config-warning",children:"⚠️ Configuration changed - Save to apply changes"})]}),(0,s.jsxs)("div",{className:"logic-upload",children:[(0,s.jsxs)("div",{className:"upload-controls",children:[(0,s.jsx)("input",{ref:rn,type:"file",accept:".js",onChange:n=>{const e=n.target.files?.[0];if(e&&e.name.endsWith(".js")){U(e);const n=new FileReader;n.onload=n=>{const e=n.target?.result;if(_(e),e.includes("processCoolingTowerControl")){const n=[],t=[],s=e.match(/const\s+EQUIPMENT_IDS\s*=\s*{([^}]+)}/s);if(s){const e=s[1],a=/COOLING_TOWER_(\d+):\s*['"]([a-zA-Z0-9]{20})['"]/g;let i;for(;null!==(i=a.exec(e));){const e=i[1],s=i[2];n.push(s),t.push(`Cooling Tower ${e}`)}}if(n.length>0){const e=n.map((n,e)=>({id:n,name:t[e],hasLogic:!1,fromFile:!0}));K(e),k(n.join(","))}else K([{id:"COOLING-TOWER-SYSTEM",name:"Cooling Tower Control System",hasLogic:!1,fromFile:!0}]),k("COOLING-TOWER-SYSTEM")}else{const n=(n=>{const e=[],t=n.match(/(?:const|let|var)?\s*equipmentMap\s*=\s*{([^}]+)}/s);if(t){const n=t[1],s=/["']([a-zA-Z0-9]{20})["']\s*:\s*\d+,?\s*\/\/\s*([^\n]+)/g;let a;for(;null!==(a=s.exec(n));)e.push({id:a[1],name:a[2].trim()})}if(0===e.length){const t=/-\s*([^(]+)\s*\(([a-zA-Z0-9]{20})\)/g;let s;for(;null!==(s=t.exec(n));)e.push({id:s[2],name:s[1].trim()})}if(0===e.length){const t=/["']([a-zA-Z0-9]{20})["']/g,s=new Set;let a;for(;null!==(a=t.exec(n));)s.has(a[1])||(s.add(a[1]),e.push({id:a[1],name:`Equipment ${a[1].substring(0,6)}`}))}return e})(e);if(n.length>0){const e=n.map(n=>({id:n.id,name:n.name,hasLogic:!1,fromFile:!0}));K(n=>{const t=n.filter(n=>n.hasLogic);return[...t,...e]}),k("")}}},n.readAsText(e)}else alert("Please select a valid .js file")},style:{display:"none"}}),(0,s.jsxs)("button",{className:"btn-primary",onClick:()=>rn.current?.click(),style:{background:B?"#10b981":"#3b82f6"},children:[(0,s.jsx)(m.A,{size:14}),B?"Logic Loaded - Change File":"Select Logic File"]}),(P||B&&t)&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"file-name",children:P?.name||`Logic for ${t?.substring(0,20)}...`}),(0,s.jsxs)("button",{className:"btn-remove",onClick:async()=>{if(!t)return U(null),_(""),en(""),k(""),K(n=>n.filter(n=>n.hasLogic)),void Q(!1);if(window.confirm(`Remove logic file for ${t}?\n\nThis will delete the logic file from the server.`))try{(await(0,N.U)(`/api/logic/delete/${t}`,{method:"DELETE"})).ok?(U(null),_(""),en(""),k(""),Q(!1),await On(),alert("Logic file removed successfully")):alert("Failed to remove logic file from server")}catch(n){console.error("Error removing logic file:",n),alert("Error removing logic file")}},title:"Remove selected file",children:[(0,s.jsx)(g.A,{size:14}),"Remove"]})]})]}),(0,s.jsxs)("div",{className:"logic-actions",children:[(0,s.jsxs)("button",{className:"btn-primary",onClick:async()=>{if(B)if(t){if(window.confirm(`Save configuration for Equipment ID: ${t}?\n\nLogic Execution: ${A?"ENABLED":"DISABLED"}\nAuto-Run: ${S?"ENABLED":"DISABLED"}${S?` (every ${E} seconds)`:""}\n\nThis will ${A?"enable":"disable"} local failover control when the BMS server is unavailable.`))try{(await(0,N.U)("/api/logic/upload",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:B,equipmentId:t,enabled:A,autoRunEnabled:S,pollingInterval:E})})).ok?(alert(`Configuration saved successfully for ${t}`),Z(!1),On(),Ln(),A&&await(0,N.U)("/api/logic/start-controller",{method:"POST"})):alert("Failed to save configuration")}catch(n){console.error("Error saving configuration:",n),alert("Error saving configuration")}}else alert("Please select an equipment ID first");else alert("Please select a logic file first")},disabled:!B||!t,style:{background:"#14b8a6",borderColor:"#14b8a6"},children:[(0,s.jsx)(m.A,{size:14}),"Save Configuration"]}),(0,s.jsxs)("button",{className:"btn-info",onClick:async()=>{if(!t)return void alert("Please select an equipment ID first");let n=B;if(!n)try{const e=await(0,N.U)(`/api/logic/current/${t}`);e.ok&&(n=await e.text())}catch(n){console.error("Error fetching saved logic:",n)}if(n){H(!0),J("Testing logic...\n");try{const e=await(0,N.U)("/api/logic/test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:n,equipmentId:t})});if(e.ok){const n=await e.json();J(n.output||"Test completed successfully")}else{const n=await e.text();J(`Test failed: ${n}`)}}catch(n){console.error("Error testing logic:",n),J("Error: "+n)}finally{H(!1)}}else alert("No logic file loaded or saved for this equipment")},disabled:!B||M,children:[M?(0,s.jsx)(h.A,{size:14}):(0,s.jsx)(x.A,{size:14}),M?"Testing...":"Test Logic"]}),(0,s.jsxs)("button",{className:"btn-danger",onClick:async()=>{if(window.confirm("Reset ALL configurations?\n\nThis will:\n- Clear all board configurations\n- Remove loaded hardware config\n- Clear equipment logic files")){fn([]),mn(null),pn(null),An([]);try{await(0,N.U)("/api/logic/boards",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify([])}),t&&(await(0,N.U)(`/api/logic/delete/${t}`,{method:"DELETE"}),_(""),U(null),en(""),Q(!1),k("")),alert("All configurations have been reset"),On(),window.location.reload()}catch(n){console.error("Error resetting configuration:",n),alert("Error resetting configuration")}}},disabled:!1,children:[(0,s.jsx)(g.A,{size:14}),"Reset Configuration"]})]})]}),(0,s.jsxs)("div",{className:"logic-editor",children:[(0,s.jsxs)("div",{className:"editor-header",children:[(0,s.jsx)("h3",{children:"Logic File Content"}),B&&t&&(0,s.jsx)("div",{className:"editor-actions",children:X?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("button",{className:"btn-save-changes",onClick:async()=>{if(t&&B){if(window.confirm(`Save logic changes for ${G.find(n=>n.id===t)?.name||t}?\n\nThis will update the logic file that controls the equipment when in failover mode.`))try{(await(0,N.U)("/api/logic/upload",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:B,equipmentId:t,enabled:A})})).ok?(alert("Logic changes saved successfully"),en(B),Q(!1),On()):alert("Failed to save logic changes")}catch(n){console.error("Error saving logic changes:",n),alert("Error saving logic changes")}}else alert("No logic content to save")},children:[(0,s.jsx)(b.A,{size:14}),"Save Logic Changes"]}),(0,s.jsxs)("button",{className:"btn-cancel",onClick:()=>{_(nn),Q(!1)},children:[(0,s.jsx)(g.A,{size:14}),"Cancel"]})]}):(0,s.jsxs)("button",{className:"btn-modify",onClick:()=>Q(!0),children:[(0,s.jsx)(r.A,{size:14}),"Modify Logic"]})})]}),(0,s.jsx)("textarea",{value:B,onChange:n=>X&&_(n.target.value),placeholder:"// Equipment logic code will appear here...",spellCheck:!1,readOnly:!X,className:X?"editing":"readonly"}),X&&(0,s.jsx)("div",{className:"edit-indicator",children:(0,s.jsx)("span",{children:'📝 Editing Mode - Make your changes and click "Save Logic Changes" when done'})})]}),W&&(0,s.jsxs)("div",{className:"logic-output",children:[(0,s.jsx)("h3",{children:"Test Output"}),(0,s.jsx)("pre",{children:W})]}),B&&t&&B.includes("processCoolingTowerControl")&&(0,s.jsxs)("div",{className:"logic-execution-section",style:{background:"#f0fdf4",border:"2px solid #10b981",borderRadius:"8px",padding:"20px",marginTop:"20px"},children:[(0,s.jsxs)("h3",{style:{color:"#065f46",marginTop:0},children:[(0,s.jsx)(l.A,{size:20,style:{verticalAlign:"middle",marginRight:"8px"}}),"Logic Execution Engine"]}),(0,s.jsxs)("div",{style:{marginBottom:"15px"},children:[(0,s.jsx)("p",{style:{color:"#374151"},children:"The Cooling Tower Control Logic is ready for execution. When enabled, the system will:"}),(0,s.jsxs)("ul",{style:{color:"#6b7280",marginLeft:"20px"},children:[(0,s.jsxs)("li",{children:["Read inputs from MegaBAS and 16-Input boards every ",E>=60?60===E?"1 minute":E/60+" minutes":`${E} seconds`]}),(0,s.jsx)("li",{children:"Execute the control logic with real sensor data"}),(0,s.jsx)("li",{children:"Write outputs to control tower VFDs, valves, and heaters"}),(0,s.jsx)("li",{children:"Monitor safety limits and vibration levels"})]})]}),(0,s.jsxs)("div",{style:{display:"flex",gap:"15px",alignItems:"center",padding:"15px",background:"white",borderRadius:"6px"},children:[(0,s.jsxs)("button",{className:"btn-success",onClick:async()=>{if(confirm("Start real-time logic execution? This will control actual equipment based on sensor readings."))try{await(0,N.U)("/api/boards/save-config",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(bn)}),(await(0,N.U)("/api/logic/execute",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({logicFile:B,equipmentId:t,pollingInterval:E})})).ok&&(alert("Logic execution started successfully!"),I(!0))}catch(n){console.error("Failed to start execution:",n),alert("Failed to start logic execution")}},disabled:!A,children:[(0,s.jsx)(x.A,{size:14}),"Start Real-Time Execution"]}),(0,s.jsxs)("button",{className:"btn-danger",onClick:async()=>{try{(await(0,N.U)("/api/logic/stop",{method:"POST"})).ok&&(alert("Logic execution stopped"),I(!1))}catch(n){console.error("Failed to stop execution:",n)}},children:[(0,s.jsx)(h.A,{size:14}),"Stop Execution"]}),(0,s.jsxs)("div",{style:{marginLeft:"auto",display:"flex",alignItems:"center",gap:"10px"},children:[(0,s.jsx)("label",{children:"Execution Interval:"}),(0,s.jsxs)("select",{value:E,onChange:n=>z(Number(n.target.value)),className:"interval-select",children:[(0,s.jsx)("option",{value:7,children:"7 seconds"}),(0,s.jsx)("option",{value:12,children:"12 seconds"}),(0,s.jsx)("option",{value:15,children:"15 seconds"}),(0,s.jsx)("option",{value:20,children:"20 seconds"}),(0,s.jsx)("option",{value:30,children:"30 seconds"}),(0,s.jsx)("option",{value:45,children:"45 seconds"}),(0,s.jsx)("option",{value:60,children:"1 minute"}),(0,s.jsx)("option",{value:300,children:"5 minutes"}),(0,s.jsx)("option",{value:900,children:"15 minutes"})]})]})]}),S&&(0,s.jsxs)("div",{style:{marginTop:"15px",padding:"10px",background:"#d1fae5",borderRadius:"4px",display:"flex",alignItems:"center",gap:"10px"},children:[(0,s.jsx)(d.A,{size:18,color:"#10b981"}),(0,s.jsx)("span",{style:{color:"#065f46",fontWeight:500},children:"Logic execution is ACTIVE - Reading sensors and controlling equipment"})]}),an.length>0&&(0,s.jsxs)("div",{style:{marginTop:"20px",border:"1px solid #d1d5db",borderRadius:"6px",padding:"15px",background:"#f9fafb",maxHeight:"400px",overflow:"auto"},children:[(0,s.jsxs)("h4",{style:{margin:"0 0 15px 0",color:"#374151"},children:["Live Execution Results",(0,s.jsxs)("span",{style:{float:"right",fontSize:"12px",color:"#6b7280",fontWeight:"normal"},children:["Last ",an.length," executions"]})]}),(0,s.jsx)("div",{style:{display:"grid",gap:"10px"},children:an.slice(-5).reverse().map((n,e)=>(0,s.jsxs)("div",{style:{background:"white",border:"1px solid #e5e7eb",borderRadius:"4px",padding:"10px",fontSize:"12px"},children:[(0,s.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px",borderBottom:"1px solid #f3f4f6",paddingBottom:"5px"},children:[(0,s.jsx)("span",{style:{color:"#6b7280"},children:new Date(n.timestamp).toLocaleTimeString()}),(0,s.jsx)("span",{style:{color:"#10b981",fontWeight:500},children:n.activeLogic||"CoolingTower"})]}),n.outputs&&(0,s.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"10px"},children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{style:{color:"#9ca3af"},children:"Tower 1:"}),(0,s.jsxs)("span",{style:{marginLeft:"5px",color:n.outputs.tower1VFDEnable?"#10b981":"#6b7280",fontWeight:500},children:[n.outputs.tower1VFDEnable?"ON":"OFF",n.outputs.tower1FanSpeed>0&&` (${n.outputs.tower1FanSpeed}V)`]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{style:{color:"#9ca3af"},children:"Tower 2:"}),(0,s.jsxs)("span",{style:{marginLeft:"5px",color:n.outputs.tower2VFDEnable?"#10b981":"#6b7280",fontWeight:500},children:[n.outputs.tower2VFDEnable?"ON":"OFF",n.outputs.tower2FanSpeed>0&&` (${n.outputs.tower2FanSpeed}V)`]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{style:{color:"#9ca3af"},children:"Tower 3:"}),(0,s.jsxs)("span",{style:{marginLeft:"5px",color:n.outputs.tower3VFDEnable?"#10b981":"#6b7280",fontWeight:500},children:[n.outputs.tower3VFDEnable?"ON":"OFF",n.outputs.tower3FanSpeed>0&&` (${n.outputs.tower3FanSpeed}V)`]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{style:{color:"#9ca3af"},children:"Active Towers:"}),(0,s.jsx)("span",{style:{marginLeft:"5px",fontWeight:500},children:n.outputs.activeTowers||0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{style:{color:"#9ca3af"},children:"Cooling Demand:"}),(0,s.jsxs)("span",{style:{marginLeft:"5px",fontWeight:500},children:[n.outputs.coolingDemand||0,"%"]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{style:{color:"#9ca3af"},children:"Delta-T:"}),(0,s.jsxs)("span",{style:{marginLeft:"5px",fontWeight:500},children:[n.outputs.loopDeltaT?.toFixed(1)||"0.0","°F"]})]})]}),n.inputs&&(0,s.jsxs)("div",{style:{marginTop:"8px",paddingTop:"8px",borderTop:"1px solid #f3f4f6",color:"#9ca3af",fontSize:"11px"},children:["Supply: ",n.inputs.CH1?.toFixed(1)||"--","°F | Return: ",n.inputs.CH2?.toFixed(1)||"--","°F | OAT: ",n.inputs.outdoorTemp?.toFixed(1)||n.outputs?.outdoorTemp?.toFixed(1)||"--","°F"]})]},e))})]})]}),S&&(0,s.jsxs)("div",{className:"processing-results",children:[(0,s.jsxs)("h3",{children:["Processing Logic Results ",tn.length>0&&(0,s.jsx)("span",{className:"live-indicator",children:"● Live"})]}),0===tn.length?(0,s.jsxs)("div",{className:"no-results",children:[(0,s.jsx)("p",{children:"Waiting for logic execution results..."}),(0,s.jsxs)("small",{children:["Results will appear here when the logic runs (every ",E>=60?60===E?"1 minute":E/60+" minutes":`${E} seconds`,")"]})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"results-grid",children:tn.map((n,e)=>(0,s.jsxs)("div",{className:"result-card",children:[(0,s.jsx)("div",{className:"result-timestamp",children:new Date(n.timestamp).toLocaleTimeString()}),(0,s.jsxs)("div",{className:"result-data",children:[(0,s.jsxs)("div",{className:"result-row",children:[(0,s.jsx)("span",{className:"result-label",children:"Setpoint:"}),(0,s.jsxs)("span",{className:"result-value",children:[n.setpoint?.toFixed(1),"°F"]})]}),(0,s.jsxs)("div",{className:"result-row",children:[(0,s.jsx)("span",{className:"result-label",children:"Current:"}),(0,s.jsxs)("span",{className:"result-value",children:[n.currentTemp?.toFixed(1),"°F"]})]}),(0,s.jsxs)("div",{className:"result-row",children:[(0,s.jsx)("span",{className:"result-label",children:"Space/Supply/Outdoor:"}),(0,s.jsxs)("span",{className:"result-value",children:[n.spaceTemp?.toFixed(0)||"--","/",n.supplyTemp?.toFixed(0)||"--","/",n.outdoorTemp?.toFixed(0)||"--","°F"]})]}),(0,s.jsxs)("div",{className:"result-row",children:[(0,s.jsx)("span",{className:"result-label",children:"Heating:"}),(0,s.jsxs)("span",{className:"result-value heat",children:[n.heating?.toFixed(0),"%"]})]}),(0,s.jsxs)("div",{className:"result-row",children:[(0,s.jsx)("span",{className:"result-label",children:"Cooling:"}),(0,s.jsxs)("span",{className:"result-value cool",children:[n.cooling?.toFixed(0),"%"]})]}),(0,s.jsxs)("div",{className:"result-row",children:[(0,s.jsx)("span",{className:"result-label",children:"OA Damper:"}),(0,s.jsxs)("span",{className:"result-value",children:[n.damper?.toFixed(0),"%"]})]}),(0,s.jsxs)("div",{className:"result-row",children:[(0,s.jsx)("span",{className:"result-label",children:"Fan:"}),(0,s.jsxs)("span",{className:"result-value "+(n.fan?"active":"inactive"),children:[n.fan?"ON":"OFF"," ",n.fanSpeed&&`(${n.fanSpeed})`]})]})]})]},e))}),(0,s.jsx)("div",{className:"results-info",children:(0,s.jsxs)("small",{children:["Showing last ",tn.length," executions • Updates every 2 seconds"]})})]})]})]}),"boards"===n&&(0,s.jsxs)("div",{className:"boards-section",children:[(0,s.jsx)("h2",{children:"Sequent Microsystems Board Configuration"}),(0,s.jsx)("div",{className:"boards-grid",children:bn.map((n,e)=>(0,s.jsxs)("div",{className:"board-card",children:[(0,s.jsxs)("h3",{children:["megabas"===n.boardType&&"MegaBAS","16univin"===n.boardType&&"16-Universal Inputs","16relind"===n.boardType&&"16-Relay","16uout"===n.boardType&&"16-Outputs","8relind"===n.boardType&&"8-Relay"," ","(Stack ",n.stackAddress,")"]}),(0,s.jsx)("div",{className:"board-status",children:(0,s.jsxs)("label",{className:"board-toggle-container",children:[(0,s.jsx)("span",{children:"Board Enabled"}),(0,s.jsx)(y.A,{checked:n.enabled,onCheckedChange:n=>Rn(e,"enabled",n)})]})}),n.enabled&&(0,s.jsxs)("div",{className:"board-outputs",children:[(0,s.jsx)("h4",{children:"Output Configuration"}),"megabas"===n.boardType&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"output-group",children:[(0,s.jsx)("h5",{children:"Triac Outputs (1-4)"}),[1,2,3,4].map(t=>(0,s.jsxs)("div",{className:"output-item",children:[(0,s.jsxs)("span",{className:"output-number",children:["T",t]}),(0,s.jsx)("input",{type:"text",placeholder:`Triac ${t} name`,value:n.outputs[t]?.name||"",onChange:n=>Rn(e,`output_${t}_name`,n.target.value)}),(0,s.jsx)(y.A,{checked:n.outputs[t]?.enabled||!1,onCheckedChange:n=>Rn(e,`output_${t}_enabled`,n)})]},`triac-${t}`))]}),(0,s.jsxs)("div",{className:"output-group",children:[(0,s.jsx)("h5",{children:"0-10V Outputs (1-4)"}),[5,6,7,8].map((t,a)=>(0,s.jsxs)("div",{className:"output-item",children:[(0,s.jsxs)("span",{className:"output-number",children:["AO",a+1]}),(0,s.jsx)("input",{type:"text",placeholder:`Output ${a+1} name`,value:n.outputs[t]?.name||"",onChange:n=>Rn(e,`output_${t}_name`,n.target.value)}),(0,s.jsx)(y.A,{checked:n.outputs[t]?.enabled||!1,onCheckedChange:n=>Rn(e,`output_${t}_enabled`,n)})]},`out-${t}`))]}),(0,s.jsxs)("div",{className:"input-group",children:[(0,s.jsx)("h5",{children:"Universal Inputs (1-8)"}),[1,2,3,4,5,6,7,8].map(t=>(0,s.jsxs)("div",{className:"input-config-item",children:[(0,s.jsxs)("span",{className:"input-number",children:["In",t]}),(0,s.jsx)("input",{type:"text",placeholder:`Input ${t} name`,value:n.inputs?.[t]?.name||"",onChange:n=>Rn(e,`input_${t}_name`,n.target.value)}),(0,s.jsxs)("select",{value:n.inputs?.[t]?.inputType||"0-10V",onChange:n=>Rn(e,`input_${t}_type`,n.target.value),className:"input-type-select",children:[(0,s.jsx)("option",{value:"0-10V",children:"0-10V"}),(0,s.jsx)("option",{value:"1k",children:"1k RTD"}),(0,s.jsx)("option",{value:"10k",children:"10k Thermistor"})]}),(0,s.jsxs)("select",{value:n.inputs?.[t]?.conversionType||"voltage",onChange:n=>Rn(e,`input_${t}_conversion`,n.target.value),className:"conversion-select",children:[(0,s.jsx)("option",{value:"temperature",children:"Temperature (°F)"}),(0,s.jsx)("option",{value:"amps",children:"Current (Amps)"}),(0,s.jsx)("option",{value:"humidity",children:"Humidity (%)"}),(0,s.jsx)("option",{value:"pressure",children:"Pressure (PSI)"}),(0,s.jsx)("option",{value:"voltage",children:"Voltage (V)"})]}),"amps"===n.inputs?.[t]?.conversionType&&(0,s.jsxs)("select",{value:n.inputs?.[t]?.scaling||"0-50",onChange:n=>Rn(e,`input_${t}_scaling`,n.target.value),className:"scaling-select",children:[(0,s.jsx)("option",{value:"0-20",children:"0-20A"}),(0,s.jsx)("option",{value:"0-50",children:"0-50A"}),(0,s.jsx)("option",{value:"0-100",children:"0-100A"})]}),(0,s.jsx)(y.A,{checked:!1!==n.inputs?.[t]?.enabled,onCheckedChange:n=>Rn(e,`input_${t}_enabled`,n)})]},`input-${t}`))]})]}),"16univin"===n.boardType&&(0,s.jsxs)("div",{className:"input-group",children:[(0,s.jsx)("h5",{children:"16 Universal Inputs"}),Array.from({length:16},(n,e)=>e+1).map(t=>(0,s.jsxs)("div",{className:"input-config-item",children:[(0,s.jsxs)("span",{className:"input-number",children:["In",t]}),(0,s.jsx)("input",{type:"text",placeholder:`Input ${t} name`,value:n.inputs?.[t]?.name||"",onChange:n=>Rn(e,`input_${t}_name`,n.target.value)}),(0,s.jsxs)("select",{value:n.inputs?.[t]?.inputType||"0-10V",onChange:n=>Rn(e,`input_${t}_type`,n.target.value),className:"input-type-select",children:[(0,s.jsx)("option",{value:"0-10V",children:"0-10V"}),(0,s.jsx)("option",{value:"1k",children:"1k RTD"}),(0,s.jsx)("option",{value:"10k",children:"10k Thermistor"})]}),(0,s.jsxs)("select",{value:n.inputs?.[t]?.conversionType||"temperature",onChange:n=>Rn(e,`input_${t}_conversion`,n.target.value),className:"conversion-select",children:[(0,s.jsx)("option",{value:"temperature",children:"Temperature (°F)"}),(0,s.jsx)("option",{value:"amps",children:"Current (Amps)"}),(0,s.jsx)("option",{value:"humidity",children:"Humidity (%)"}),(0,s.jsx)("option",{value:"pressure",children:"Pressure (PSI)"}),(0,s.jsx)("option",{value:"voltage",children:"Voltage (V)"})]}),"amps"===n.inputs?.[t]?.conversionType&&(0,s.jsxs)("select",{value:n.inputs?.[t]?.scaling||"0-50",onChange:n=>Rn(e,`input_${t}_scaling`,n.target.value),className:"scaling-select",children:[(0,s.jsx)("option",{value:"0-20",children:"0-20A"}),(0,s.jsx)("option",{value:"0-50",children:"0-50A"}),(0,s.jsx)("option",{value:"0-100",children:"0-100A"})]}),(0,s.jsx)(y.A,{checked:!1!==n.inputs?.[t]?.enabled,onCheckedChange:n=>Rn(e,`input_${t}_enabled`,n)})]},`input-${t}`))]}),("16relind"===n.boardType||"8relind"===n.boardType)&&(0,s.jsxs)("div",{className:"output-group",children:[(0,s.jsx)("h5",{children:"Relays"}),Array.from({length:"16relind"===n.boardType?16:8},(n,e)=>e+1).map(t=>(0,s.jsxs)("div",{className:"output-item compact",children:[(0,s.jsxs)("span",{children:["R",t]}),(0,s.jsx)("input",{type:"text",placeholder:`Relay ${t} name`,value:n.outputs[t]?.name||"",onChange:n=>Rn(e,`output_${t}_name`,n.target.value)}),(0,s.jsx)(y.A,{checked:n.outputs[t]?.enabled||!1,onCheckedChange:n=>Rn(e,`output_${t}_enabled`,n)})]},`relay-${t}`))]}),"16uout"===n.boardType&&(0,s.jsxs)("div",{className:"output-group",children:[(0,s.jsx)("h5",{children:"0-10V Outputs"}),Array.from({length:16},(n,e)=>e+1).map(t=>(0,s.jsxs)("div",{className:"output-item compact",children:[(0,s.jsxs)("span",{children:["O",t]}),(0,s.jsx)("input",{type:"text",placeholder:`Output ${t} name`,value:n.outputs[t]?.name||"",onChange:n=>Rn(e,`output_${t}_name`,n.target.value)}),(0,s.jsx)(y.A,{checked:n.outputs[t]?.enabled||!1,onCheckedChange:n=>Rn(e,`output_${t}_enabled`,n)})]},`uout-${t}`))]})]})]},e))}),(0,s.jsx)("div",{className:"board-actions",children:(0,s.jsx)("button",{className:"btn-save",onClick:async()=>{try{(await(0,N.U)("/api/logic/boards",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(bn)})).ok?alert("Board configuration saved successfully"):alert("Failed to save board configuration")}catch(n){console.error("Error saving board config:",n),alert("Error saving board configuration")}},children:"Save Configuration"})})]}),"status"===n&&(0,s.jsxs)("div",{className:"status-section",children:[(0,s.jsx)("h2",{children:"BMS Connection Status"}),(0,s.jsxs)("div",{className:"status-header",children:[(0,s.jsx)("div",{className:"connection-toggle",children:(0,s.jsxs)("button",{className:"toggle-btn "+(yn?"enabled":"disabled"),onClick:async()=>{try{(await(0,N.U)("/api/logic/bms-toggle",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({enabled:!yn})})).ok&&(wn(!yn),zn())}catch(n){console.error("Error toggling BMS:",n)}},children:[yn?(0,s.jsx)(f.A,{size:24}):(0,s.jsx)(j.A,{size:24}),(0,s.jsx)("span",{children:yn?"Connected":"Disconnected"})]})}),(0,s.jsxs)("div",{className:"bms-address",children:[(0,s.jsx)(v.A,{size:20}),(0,s.jsx)("span",{children:"BMS Server: 143.198.162.31"})]})]}),(0,s.jsxs)("div",{className:"status-grid",children:[(0,s.jsxs)("div",{className:"status-card",children:[(0,s.jsx)("h3",{children:"Connection Status"}),(0,s.jsxs)("div",{className:"status-indicator "+(jn.connected?"connected":"disconnected"),children:[jn.connected?(0,s.jsx)(b.A,{size:32}):(0,s.jsx)(g.A,{size:32}),(0,s.jsx)("span",{children:jn.connected?"Connected":"Disconnected"})]})]}),(0,s.jsxs)("div",{className:"status-card",children:[(0,s.jsx)("h3",{children:"Connection Details"}),(0,s.jsxs)("div",{className:"status-details",children:[(0,s.jsxs)("div",{className:"detail-row",children:[(0,s.jsx)("span",{children:"Last Ping:"}),(0,s.jsx)("span",{children:jn.lastPing})]}),(0,s.jsxs)("div",{className:"detail-row",children:[(0,s.jsx)("span",{children:"Latency:"}),(0,s.jsxs)("span",{children:[jn.latency,"ms"]})]}),(0,s.jsxs)("div",{className:"detail-row",children:[(0,s.jsx)("span",{children:"Logic Source:"}),(0,s.jsx)("span",{className:`source-badge ${jn.logicFileStatus}`,children:jn.usingLocalFile?"Local File":"Remote Server"})]})]})]}),(0,s.jsxs)("div",{className:"status-card",children:[(0,s.jsx)("h3",{children:"Failover Status"}),(0,s.jsx)("div",{className:"failover-info",children:jn.usingLocalFile?(0,s.jsxs)("div",{className:"failover-active",children:[(0,s.jsx)(i.A,{size:24,color:"#f59e0b"}),(0,s.jsx)("p",{children:"Using local logic file due to connection failure"})]}):(0,s.jsxs)("div",{className:"failover-standby",children:[(0,s.jsx)(b.A,{size:24,color:"#10b981"}),(0,s.jsx)("p",{children:"Connected to remote server"})]})})]}),(0,s.jsxs)("div",{className:"status-card",children:[(0,s.jsx)("h3",{children:"Node-RED Integration"}),(0,s.jsxs)("div",{className:"integration-status",children:[(0,s.jsxs)("div",{className:"detail-row",children:[(0,s.jsx)("span",{children:"Command Retrieval:"}),(0,s.jsx)("span",{className:jn.connected?"active":"inactive",children:jn.connected?"Active":"Inactive"})]}),(0,s.jsxs)("div",{className:"detail-row",children:[(0,s.jsx)("span",{children:"Logic File:"}),(0,s.jsx)("span",{children:"none"!==jn.logicFileStatus?"Loaded":"Not Loaded"})]})]})]})]})]}),"audit"===n&&(0,s.jsxs)("div",{className:"audit-section",children:[(0,s.jsxs)("div",{className:"audit-controls",children:[(0,s.jsx)("h2",{children:"Audit Trail"}),(0,s.jsxs)("div",{className:"time-selector",children:[(0,s.jsx)("label",{children:"Time Range:"}),(0,s.jsxs)("select",{value:V,onChange:n=>q(Number(n.target.value)),children:[(0,s.jsx)("option",{value:1,children:"Last Hour"}),(0,s.jsx)("option",{value:6,children:"Last 6 Hours"}),(0,s.jsx)("option",{value:24,children:"Last 24 Hours"}),(0,s.jsx)("option",{value:72,children:"Last 3 Days"}),(0,s.jsx)("option",{value:168,children:"Last Week"}),(0,s.jsx)("option",{value:720,children:"Last Month"})]})]})]}),D?(0,s.jsx)("div",{className:"loading",children:"Loading audit logs..."}):0===$.length?(0,s.jsxs)("div",{className:"no-data",children:[(0,s.jsx)(p.A,{size:48,color:"#9ca3af"}),(0,s.jsx)("h3",{children:"No Audit Logs"}),(0,s.jsx)("p",{children:"No activity recorded in the selected time range"})]}):(0,s.jsx)("div",{className:"audit-table-wrapper",children:(0,s.jsxs)("table",{className:"audit-table",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{children:"Time"}),(0,s.jsx)("th",{children:"User"}),(0,s.jsx)("th",{children:"Action"}),(0,s.jsx)("th",{children:"Resource"}),(0,s.jsx)("th",{children:"IP Address"}),(0,s.jsx)("th",{children:"Status"}),(0,s.jsx)("th",{children:"Details"})]})}),(0,s.jsx)("tbody",{children:$.map(n=>{return(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{className:"time-cell",children:new Date(n.timestamp).toLocaleString("en-US",{timeZone:"America/New_York",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})}),(0,s.jsx)("td",{className:"user-cell",children:(0,s.jsx)("span",{className:"username",children:n.username})}),(0,s.jsx)("td",{className:"action-cell",children:(0,s.jsxs)("span",{className:"action-badge",children:[qn(n.action||"")," ",n.action||"Unknown"]})}),(0,s.jsx)("td",{className:"resource-cell",children:n.resource||"-"}),(0,s.jsx)("td",{className:"ip-cell",children:(0,s.jsx)("code",{children:n.ip_address||"Unknown"})}),(0,s.jsx)("td",{className:"status-cell",children:(0,s.jsx)("span",{className:"status-badge",style:{color:(e=n.status||"",e?"success"===e?"#10b981":"#ef4444":"#6b7280")},children:n.status||"unknown"})}),(0,s.jsx)("td",{className:"details-cell",children:n.details&&(0,s.jsxs)("span",{className:"details",title:n.details,children:[n.details.substring(0,50),n.details.length>50&&"..."]})})]},n.id);var e})})]})})]}),"pid"===n&&(0,s.jsxs)("div",{className:"pid-section",children:[(0,s.jsx)("h2",{children:"PID Controllers - 0-10V Actuator Control"}),0===Cn.length?(0,s.jsxs)("div",{style:{padding:"40px",textAlign:"center",background:"#f9fafb",borderRadius:"8px",border:"2px dashed #d1d5db",margin:"20px 0"},children:[(0,s.jsx)("h3",{style:{color:"#6b7280",marginBottom:"10px"},children:"No PID Controllers Configured"}),(0,s.jsx)("p",{style:{color:"#9ca3af"},children:"Upload a hardware configuration HTML file in the Logic Engine tab to automatically configure PID controllers based on your equipment's analog outputs (valves, VFDs, dampers, etc.)"})]}):(0,s.jsxs)(s.Fragment,{children:[un&&(0,s.jsxs)("div",{style:{padding:"15px",background:"#f0fdf4",border:"1px solid #10b981",borderRadius:"6px",marginBottom:"20px"},children:[(0,s.jsxs)("p",{style:{margin:0,color:"#065f46",fontWeight:500},children:["✓ Auto-configured ",Cn.length," PID controller",Cn.length>1?"s":""," from hardware configuration"]}),(0,s.jsxs)("small",{style:{color:"#6b7280"},children:["Controllers configured for: ",Cn.map(n=>n.outputChannel).join(", ")]})]}),(0,s.jsx)("div",{className:"pid-controllers",children:Cn.map((n,e)=>(0,s.jsxs)("div",{className:"pid-card",children:[(0,s.jsxs)("div",{className:"pid-header",children:[(0,s.jsx)("h3",{children:n.name}),(0,s.jsxs)("div",{className:"pid-toggle",children:[(0,s.jsxs)("label",{className:"toggle-switch",children:[(0,s.jsx)("input",{type:"checkbox",checked:n.enabled,onChange:n=>Vn(e,"enabled",n.target.checked)}),(0,s.jsx)("span",{className:"toggle-slider"})]}),(0,s.jsx)("span",{className:"toggle-label",children:n.enabled?"Enabled":"Disabled"})]})]}),(0,s.jsxs)("div",{className:"pid-params",children:[(0,s.jsxs)("div",{className:"param-row",children:[(0,s.jsx)("label",{children:"Setpoint (°F):"}),(0,s.jsx)("input",{type:"number",value:n.setpoint||45,onChange:n=>Vn(e,"setpoint",parseFloat(n.target.value)),min:"40",max:"100",step:"0.5"})]}),(0,s.jsxs)("div",{className:"param-group",children:[(0,s.jsx)("h4",{children:"PID Tuning"}),(0,s.jsxs)("div",{className:"param-row",children:[(0,s.jsx)("label",{children:"Kp (Proportional):"}),(0,s.jsx)("input",{type:"number",value:n.kp||2.5,onChange:n=>Vn(e,"kp",parseFloat(n.target.value)),min:"0",max:"10",step:"0.1"})]}),(0,s.jsxs)("div",{className:"param-row",children:[(0,s.jsx)("label",{children:"Ki (Integral):"}),(0,s.jsx)("input",{type:"number",value:n.ki||.15,onChange:n=>Vn(e,"ki",parseFloat(n.target.value)),min:"0",max:"5",step:"0.1"})]}),(0,s.jsxs)("div",{className:"param-row",children:[(0,s.jsx)("label",{children:"Kd (Derivative):"}),(0,s.jsx)("input",{type:"number",value:n.kd||.05,onChange:n=>Vn(e,"kd",parseFloat(n.target.value)),min:"0",max:"2",step:"0.01"})]})]}),(0,s.jsxs)("div",{className:"param-group",children:[(0,s.jsx)("h4",{children:"Output Limits (0-10V)"}),(0,s.jsxs)("div",{className:"param-row",children:[(0,s.jsx)("label",{children:"Min Voltage:"}),(0,s.jsxs)("div",{className:"voltage-input",children:[(0,s.jsx)("input",{type:"number",value:n.outputMin||0,onChange:n=>Vn(e,"outputMin",parseFloat(n.target.value)),min:"0",max:"10",step:"0.1"}),(0,s.jsxs)("span",{className:"voltage-unit",children:["V (",(10*(n.outputMin||0)).toFixed(0),"%)"]})]})]}),(0,s.jsxs)("div",{className:"param-row",children:[(0,s.jsx)("label",{children:"Max Voltage:"}),(0,s.jsxs)("div",{className:"voltage-input",children:[(0,s.jsx)("input",{type:"number",value:n.outputMax||10,onChange:n=>Vn(e,"outputMax",parseFloat(n.target.value)),min:"0",max:"10",step:"0.1"}),(0,s.jsxs)("span",{className:"voltage-unit",children:["V (",(10*(n.outputMax||10)).toFixed(0),"%)"]})]})]})]}),(0,s.jsxs)("div",{className:"param-group",children:[(0,s.jsx)("h4",{children:"Control Action"}),(0,s.jsxs)("div",{className:"action-toggle",children:[(0,s.jsx)("button",{className:"action-btn "+(n.reverseActing?"":"active"),onClick:()=>Vn(e,"reverseActing",!1),children:"Direct Acting"}),(0,s.jsx)("button",{className:"action-btn "+(n.reverseActing?"active":""),onClick:()=>Vn(e,"reverseActing",!0),children:"Reverse Acting"})]}),(0,s.jsx)("div",{className:"action-help",children:n.reverseActing?(0,s.jsx)("p",{children:"Reverse: Output decreases as process variable increases (heating)"}):(0,s.jsx)("p",{children:"Direct: Output increases as process variable increases (cooling)"})})]}),(0,s.jsxs)("div",{className:"output-display",children:[(0,s.jsx)("h4",{children:"Current Output"}),(0,s.jsxs)("div",{className:"output-value",children:[(0,s.jsxs)("span",{className:"voltage",children:[(n.currentOutput||0).toFixed(2),"V"]}),(0,s.jsxs)("span",{className:"percentage",children:["(",(10*(n.currentOutput||0)).toFixed(0),"%)"]})]}),(0,s.jsx)("div",{className:"output-bar",children:(0,s.jsx)("div",{className:"output-fill",style:{width:10*(n.currentOutput||0)+"%"}})})]})]})]},e))}),(0,s.jsxs)("div",{className:"pid-actions",children:[(0,s.jsx)("button",{className:"btn-save",onClick:async()=>{try{for(const n of Cn)await(0,N.U)("/api/pid-controllers/save",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});alert("PID configuration saved successfully!")}catch(n){console.error("Error saving PID configuration:",n),alert("Failed to save PID configuration")}},children:"Save Configuration"}),(0,s.jsx)("button",{className:"btn-reset",onClick:()=>{if(confirm("Reset all PID controllers to default values?")){const n=Cn.map(n=>({...n,kp:.5,ki:.02,kd:.01,setpoint:75,outputMin:2.6,outputMax:4.8}));An(n),alert("PID controllers reset to defaults")}},children:"Reset to Defaults"})]})]})]}),"status"===n&&(0,s.jsxs)("div",{className:"bms-status-section",children:[(0,s.jsx)("h2",{children:"BMS Connection Status"}),(0,s.jsxs)("div",{className:"status-cards",children:[(0,s.jsxs)("div",{className:"status-card",children:[(0,s.jsx)("h3",{children:"System Status"}),(0,s.jsxs)("div",{className:"status-item",children:[(0,s.jsx)("span",{className:"status-label",children:"Connection:"}),(0,s.jsx)("span",{className:"status-value "+(jn.connected?"connected":"disconnected"),children:jn.connected?"● Connected":"○ Disconnected"})]}),(0,s.jsxs)("div",{className:"status-item",children:[(0,s.jsx)("span",{className:"status-label",children:"Last Ping:"}),(0,s.jsx)("span",{className:"status-value",children:jn.lastPing})]}),(0,s.jsxs)("div",{className:"status-item",children:[(0,s.jsx)("span",{className:"status-label",children:"Latency:"}),(0,s.jsxs)("span",{className:"status-value",children:[jn.latency,"ms"]})]}),(0,s.jsxs)("div",{className:"status-item",children:[(0,s.jsx)("span",{className:"status-label",children:"Logic File:"}),(0,s.jsx)("span",{className:"status-value",children:B?"Loaded":"Not Loaded"})]})]}),(0,s.jsxs)("div",{className:"status-card",style:{border:Nn?"2px solid #10b981":"2px solid #e5e7eb"},children:[(0,s.jsx)("h3",{children:"Node-RED Integration"}),(0,s.jsxs)("div",{className:"status-item",children:[(0,s.jsx)("span",{className:"status-label",children:"Command Retrieval:"}),(0,s.jsx)("span",{className:"status-value "+(Nn?"enabled":"disabled"),children:Nn?"Enabled":"Disabled"})]}),(0,s.jsxs)("div",{style:{marginTop:"20px",padding:"15px",background:Nn?"#f0fdf4":"#f9fafb",borderRadius:"6px"},children:[(0,s.jsx)("p",{style:{marginBottom:"15px",color:"#6b7280"},children:Nn?"Node-RED is actively polling for commands and sending data to the BMS system.":"Node-RED integration is disabled. The system is using local logic execution."}),(0,s.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,s.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"10px",fontWeight:500,color:"#374151"},children:[(0,s.jsx)("span",{children:"Enable Node-RED Command Retrieval"}),(0,s.jsxs)("label",{className:"toggle-switch",children:[(0,s.jsx)("input",{type:"checkbox",checked:Nn,onChange:async n=>{const e=n.target.checked;kn(e);try{await(0,N.U)("/api/logic/node-red-toggle",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({enabled:e})}),e?alert("Node-RED integration enabled. Commands will be retrieved from Node-RED flows."):alert("Node-RED integration disabled. Using local logic execution.")}catch(n){console.error("Failed to toggle Node-RED integration:",n)}}}),(0,s.jsx)("span",{className:"toggle-slider"})]})]}),Nn&&(0,s.jsxs)("span",{style:{color:"#10b981",fontSize:"12px",display:"flex",alignItems:"center",gap:"5px"},children:[(0,s.jsx)(d.A,{size:14}),"Active"]})]}),Nn&&(0,s.jsxs)("div",{style:{marginTop:"15px",padding:"10px",background:"#d1fae5",borderRadius:"4px",fontSize:"12px",color:"#065f46"},children:[(0,s.jsx)("strong",{children:"Note:"})," When enabled, Node-RED flows will override local logic execution. Disable this if you want to use the Logic Engine for equipment control."]})]}),(0,s.jsxs)("div",{className:"status-item",style:{marginTop:"15px"},children:[(0,s.jsx)("span",{className:"status-label",children:"Node-RED URL:"}),(0,s.jsx)("span",{className:"status-value",children:(0,s.jsx)("a",{href:"/node-red",target:"_blank",rel:"noopener noreferrer",style:{color:"#0ea5e9"},children:"Open Node-RED Editor →"})})]})]}),(0,s.jsxs)("div",{className:"status-card",children:[(0,s.jsx)("h3",{children:"Logic Execution"}),(0,s.jsxs)("div",{className:"status-item",children:[(0,s.jsx)("span",{className:"status-label",children:"Mode:"}),(0,s.jsx)("span",{className:"status-value",children:Nn?"Node-RED Control":"Local Logic Engine"})]}),(0,s.jsxs)("div",{className:"status-item",children:[(0,s.jsx)("span",{className:"status-label",children:"Status:"}),(0,s.jsx)("span",{className:"status-value "+(S?"enabled":"disabled"),children:S?"Running":"Stopped"})]}),S&&(0,s.jsxs)("div",{className:"status-item",children:[(0,s.jsx)("span",{className:"status-label",children:"Interval:"}),(0,s.jsx)("span",{className:"status-value",children:E>=60?60===E?"1 minute":E/60+" minutes":`${E} seconds`})]})]})]}),(0,s.jsxs)("div",{className:"notes",style:{marginTop:"20px"},children:[(0,s.jsx)("h4",{children:"Usage Guidelines:"}),(0,s.jsxs)("ul",{children:[(0,s.jsxs)("li",{children:[(0,s.jsx)("strong",{children:"Node-RED Integration:"})," Enable when you want to use Node-RED flows for BMS control and monitoring."]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("strong",{children:"Local Logic Engine:"})," Disable Node-RED integration to use uploaded JavaScript logic files for equipment control."]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("strong",{children:"Switching Modes:"})," You can switch between modes at any time. The system will remember your preference."]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("strong",{children:"Troubleshooting:"})," If equipment isn't responding, check which mode is active and ensure the appropriate system is configured."]})]})]})]}),"security"===n&&(0,s.jsxs)("div",{className:"feature-placeholder",children:[(0,s.jsx)(u.A,{size:64,color:"#14b8a6"}),(0,s.jsx)("h2",{children:"Security Features"}),(0,s.jsx)("div",{className:"placeholder-badge",children:"Feature In Progress"}),(0,s.jsx)("p",{children:"Advanced security configuration and monitoring tools coming soon."}),(0,s.jsxs)("div",{className:"placeholder-features",children:[(0,s.jsxs)("div",{className:"feature-item",children:[(0,s.jsx)("span",{className:"feature-icon",children:"🔐"}),(0,s.jsx)("span",{children:"Two-Factor Authentication"})]}),(0,s.jsxs)("div",{className:"feature-item",children:[(0,s.jsx)("span",{className:"feature-icon",children:"🛡️"}),(0,s.jsx)("span",{children:"Intrusion Detection"})]}),(0,s.jsxs)("div",{className:"feature-item",children:[(0,s.jsx)("span",{className:"feature-icon",children:"🔑"}),(0,s.jsx)("span",{children:"API Key Management"})]}),(0,s.jsxs)("div",{className:"feature-item",children:[(0,s.jsx)("span",{className:"feature-icon",children:"📊"}),(0,s.jsx)("span",{children:"Security Analytics"})]})]})]})]})]})}):(0,s.jsx)(w.A,{children:(0,s.jsx)("div",{className:"admin-container",children:(0,s.jsxs)("div",{className:"access-denied",children:[(0,s.jsx)(i.A,{size:48,color:"#ef4444"}),(0,s.jsx)("h2",{children:"Access Denied"}),(0,s.jsx)("p",{children:"You must be an administrator to access this page."})]})})})}}}]);