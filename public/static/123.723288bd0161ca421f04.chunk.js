"use strict";(self.webpackChunkautomata_neural_nexus_portal=self.webpackChunkautomata_neural_nexus_portal||[]).push([[123],{991:(e,a,s)=>{s.d(a,{A:()=>g});var t=s(4848),n=s(923),d=s(5072),i=s.n(d),o=s(7825),r=s.n(o),l=s(7659),c=s.n(l),u=s(5056),m=s.n(u),h=s(540),p=s.n(h),x=s(1113),b=s.n(x),v=s(5126),j={};j.styleTagTransform=b(),j.setAttributes=m(),j.insert=c().bind(null,"head"),j.domAPI=r(),j.insertStyleElement=p(),i()(v.A,j),v.A&&v.A.locals&&v.A.locals;const g=({checked:e,onCheckedChange:a,disabled:s=!1,className:d=""})=>(0,t.jsx)(n.bL,{className:`switch-root ${d}`,checked:e,onCheckedChange:a,disabled:s,children:(0,t.jsx)(n.zi,{className:"switch-thumb"})})},5126:(e,a,s)=>{s.d(a,{A:()=>o});var t=s(1601),n=s.n(t),d=s(6314),i=s.n(d)()(n());i.push([e.id,"/* Sleek Switch Component Styles */\n.switch-root {\n  width: 36px;\n  height: 18px;\n  background-color: #d1d5db;\n  border-radius: 9999px;\n  position: relative;\n  box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.2);\n  cursor: pointer;\n  transition: background-color 0.2s ease;\n  border: none;\n  padding: 0;\n}\n\n.switch-root[data-state='checked'] {\n  background-color: #14b8a6;\n}\n\n.switch-root[data-disabled] {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n\n.switch-thumb {\n  display: block;\n  width: 14px;\n  height: 14px;\n  background-color: white;\n  border-radius: 9999px;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);\n  transition: transform 0.2s ease;\n  transform: translateX(2px);\n  will-change: transform;\n}\n\n.switch-thumb[data-state='checked'] {\n  transform: translateX(20px);\n}",""]);const o=i},6123:(e,a,s)=>{s.r(a),s.d(a,{default:()=>r});var t=s(4848),n=s(6540),d=s(7946),i=s(991),o=s(3661);const r=()=>{const[e,a]=(0,n.useState)("megabas"),[s,r]=(0,n.useState)({megabas:!1,relay16:!1,relay8:!1,input16:!1}),[l,c]=(0,n.useState)(!0),[u,m]=(0,n.useState)(null),[h,p]=(0,n.useState)([]),[x,b]=(0,n.useState)([{id:1,state:!1,mode:"auto"},{id:2,state:!1,mode:"auto"},{id:3,state:!1,mode:"auto"},{id:4,state:!1,mode:"auto"}]),[v,j]=(0,n.useState)([{id:1,value:0,mode:"auto"},{id:2,value:0,mode:"auto"},{id:3,value:0,mode:"auto"},{id:4,value:0,mode:"auto"}]),[g,y]=(0,n.useState)([]),[N,k]=(0,n.useState)([]),[w,A]=(0,n.useState)([]),[C,S]=(0,n.useState)([]);(0,n.useEffect)(()=>{F();const e=setInterval(T,5e3);return()=>clearInterval(e)},[]);const f=(e,a)=>{if(!a||"raw"===a)return{converted:e.toFixed(0),unit:""};switch(a){case"temperature":if(e<2e3){const a=(Math.sqrt(.00644*e-1.6597)-1.961)/.00322;return{converted:Math.max(-40,Math.min(250,a)).toFixed(1),unit:"°F"}}return{converted:(9*(1/(Math.log(e/1e4)/3950+1/298.15)-273.15)/5+32).toFixed(1),unit:"°F"};case"humidity":return{converted:(e/1e4*100).toFixed(1),unit:"%"};case"pressure":return{converted:(e/1e3*15).toFixed(1),unit:"PSI"};case"voltage":return{converted:(e/1e3).toFixed(2),unit:"V"};case"resistance":return{converted:e.toFixed(0),unit:"Ω"};default:return{converted:e.toFixed(0),unit:""}}},F=async()=>{try{const e=await(0,o.U)("/api/boards/detect");if(e.ok){const s=await e.json();r(s),s.megabas?a("megabas"):s.input16?a("input16"):s.relay16?a("relay16"):s.relay8?a("relay8"):a("megabas")}const s=await(0,o.U)("/api/logic/boards");if(s.ok){const e=await s.json();p(e)}c(!1)}catch(e){m("Failed to detect boards"),c(!1)}},T=async()=>{try{const e=await(0,o.U)("/api/boards/states");if(e.ok){const a=await e.json();a.megabas&&(b(a.megabas.triacs||x),j(a.megabas.analogOutputs||v),y(a.megabas.inputs||[])),a.input16&&k(a.input16.inputs||[]),a.relay16&&A(a.relay16.relays||[]),a.relay8&&S(a.relay8.relays||[])}}catch(e){console.error("Failed to fetch board states:",e)}},O=async(e,a,s)=>{try{(await(0,o.U)("/api/boards/relay",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({board:e,relayId:a,state:s})})).ok&&("megabas"===e?b(e=>e.map(e=>e.id===a?{...e,state:s}:e)):"relay16"===e?A(e=>e.map(e=>e.id===a?{...e,state:s}:e)):"relay8"===e&&S(e=>e.map(e=>e.id===a?{...e,state:s}:e)))}catch(e){console.error("Failed to toggle relay:",e)}},U=async(e,a,s)=>{try{(await(0,o.U)("/api/boards/mode",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({board:e,outputId:a,mode:s})})).ok&&("megabas-triac"===e?b(e=>e.map(e=>e.id===a?{...e,mode:s}:e)):"megabas-analog"===e?j(e=>e.map(e=>e.id===a?{...e,mode:s}:e)):"relay16"===e?A(e=>e.map(e=>e.id===a?{...e,mode:s}:e)):"relay8"===e&&S(e=>e.map(e=>e.id===a?{...e,mode:s}:e)))}catch(e){console.error("Failed to toggle mode:",e)}};return l?(0,t.jsx)("div",{className:"controls-loading",children:"Detecting boards..."}):u?(0,t.jsxs)("div",{className:"controls-error",children:[(0,t.jsx)(d.A,{})," ",u]}):(0,t.jsxs)("div",{className:"controls-container",children:[(0,t.jsxs)("div",{className:"controls-header",children:[(0,t.jsx)("h1",{children:"Manual I/O Controls"}),(0,t.jsxs)("div",{className:"board-status",children:[s.megabas&&(0,t.jsx)("span",{className:"board-chip",children:"MegaBAS"}),s.input16&&(0,t.jsx)("span",{className:"board-chip",children:"16-Input"}),s.relay16&&(0,t.jsx)("span",{className:"board-chip",children:"16-Relay"}),s.relay8&&(0,t.jsx)("span",{className:"board-chip",children:"8-Relay"})]})]}),(0,t.jsxs)("div",{className:"controls-tabs",children:[s.megabas&&(0,t.jsx)("button",{className:"tab-button "+("megabas"===e?"active":""),onClick:()=>a("megabas"),children:"MegaBAS"}),s.input16&&(0,t.jsx)("button",{className:"tab-button "+("input16"===e?"active":""),onClick:()=>a("input16"),children:"16 Inputs"}),s.relay16&&(0,t.jsx)("button",{className:"tab-button "+("relay16"===e?"active":""),onClick:()=>a("relay16"),children:"16 Relays"}),s.relay8&&(0,t.jsx)("button",{className:"tab-button "+("relay8"===e?"active":""),onClick:()=>a("relay8"),children:"8 Relays"})]}),(0,t.jsxs)("div",{className:"controls-content",children:["megabas"===e&&s.megabas&&(()=>{const e=h.find(e=>"megabas"===e.boardType&&e.enabled);return(0,t.jsxs)("div",{className:"controls-tab-content",children:[(0,t.jsxs)("div",{className:"controls-section",children:[(0,t.jsx)("h3",{children:"Triac Outputs"}),(0,t.jsx)("div",{className:"outputs-grid",children:x.map(a=>{const s=e?.outputs?.[`triac${a.id}`],n=s?.name||`Triac ${a.id}`;return(0,t.jsxs)("div",{className:"output-card",children:[(0,t.jsxs)("div",{className:"output-header",children:[(0,t.jsx)("span",{children:n}),(0,t.jsx)("button",{className:`mode-toggle ${a.mode}`,onClick:()=>U("megabas-triac",a.id,"auto"===a.mode?"manual":"auto"),children:"auto"===a.mode?"AUTO":"MANUAL"})]}),(0,t.jsx)(i.A,{checked:a.state,onCheckedChange:e=>"manual"===a.mode&&O("megabas",a.id,e),disabled:"auto"===a.mode})]},a.id)})})]}),(0,t.jsxs)("div",{className:"controls-section",children:[(0,t.jsx)("h3",{children:"Analog Outputs (0-10V)"}),(0,t.jsx)("div",{className:"outputs-grid",children:v.map(a=>{const s=e?.outputs?.[`ao${a.id}`],n=s?.name||`AO ${a.id}`;return(0,t.jsxs)("div",{className:"output-card",children:[(0,t.jsxs)("div",{className:"output-header",children:[(0,t.jsx)("span",{children:n}),(0,t.jsx)("button",{className:`mode-toggle ${a.mode}`,onClick:()=>U("megabas-analog",a.id,"auto"===a.mode?"manual":"auto"),children:"auto"===a.mode?"AUTO":"MANUAL"})]}),(0,t.jsx)("input",{type:"range",min:"0",max:"10",step:"0.1",value:a.value,onChange:e=>"manual"===a.mode&&(async(e,a)=>{try{(await(0,o.U)("/api/boards/analog",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({board:"megabas",outputId:e,value:a})})).ok&&j(s=>s.map(s=>s.id===e?{...s,value:a}:s))}catch(e){console.error("Failed to update analog output:",e)}})(a.id,parseFloat(e.target.value)),disabled:"auto"===a.mode,className:a.mode}),(0,t.jsxs)("span",{className:"output-value",children:[a.value.toFixed(1),"V"]})]},a.id)})})]}),(0,t.jsxs)("div",{className:"controls-section",children:[(0,t.jsx)("h3",{children:"Universal Inputs"}),(0,t.jsx)("div",{className:"inputs-grid",children:g.map(a=>{const s=e?.inputs?.[a.id],n=s?.conversionType||"raw",{converted:d,unit:i}=f(a.value,n);return(0,t.jsxs)("div",{className:"input-card",children:[(0,t.jsxs)("div",{className:"input-header",children:[(0,t.jsx)("span",{children:s?.name||a.label||`Input ${a.id}`}),(0,t.jsx)("span",{className:"input-type",children:n})]}),(0,t.jsxs)("div",{className:"input-values",children:[(0,t.jsxs)("div",{className:"input-value-converted",children:[d,i]}),(0,t.jsxs)("div",{className:"input-value-raw",children:[a.value.toFixed(0)," raw"]})]})]},a.id)})})]})]})})(),"input16"===e&&s.input16&&(0,t.jsx)("div",{className:"controls-tab-content",children:(0,t.jsxs)("div",{className:"controls-section",children:[(0,t.jsx)("h3",{children:"16 Universal Inputs"}),(0,t.jsx)("div",{className:"inputs-grid large",children:N.map(e=>{const a=h.find(e=>"16univin"===e.boardType&&e.enabled),s=a?.inputs?.[e.id],n=s?.conversionType||"raw",{converted:d,unit:i}=f(e.value,n);return(0,t.jsxs)("div",{className:"input-card",children:[(0,t.jsxs)("div",{className:"input-header",children:[(0,t.jsx)("span",{children:s?.name||e.label||`Input ${e.id}`}),(0,t.jsx)("span",{className:"input-type",children:n})]}),(0,t.jsxs)("div",{className:"input-values",children:[(0,t.jsxs)("div",{className:"input-value-converted",children:[d,i]}),(0,t.jsxs)("div",{className:"input-value-raw",children:[e.value.toFixed(0)," raw"]})]})]},e.id)})})]})}),"relay16"===e&&s.relay16&&(0,t.jsx)("div",{className:"controls-tab-content",children:(0,t.jsxs)("div",{className:"controls-section",children:[(0,t.jsx)("h3",{children:"16 Relay Outputs"}),(0,t.jsx)("div",{className:"outputs-grid large",children:w.map(e=>{const a=h.find(e=>"16relay"===e.boardType&&e.enabled),s=a?.outputs?.[e.id],n=s?.name||`Relay ${e.id}`;return(0,t.jsxs)("div",{className:"output-card",children:[(0,t.jsxs)("div",{className:"output-header",children:[(0,t.jsx)("span",{children:n}),(0,t.jsx)("button",{className:`mode-toggle ${e.mode}`,onClick:()=>U("relay16",e.id,"auto"===e.mode?"manual":"auto"),children:"auto"===e.mode?"AUTO":"MANUAL"})]}),(0,t.jsx)(i.A,{checked:e.state,onCheckedChange:a=>"manual"===e.mode&&O("relay16",e.id,a),disabled:"auto"===e.mode})]},e.id)})})]})}),"relay8"===e&&s.relay8&&(0,t.jsx)("div",{className:"controls-tab-content",children:(0,t.jsxs)("div",{className:"controls-section",children:[(0,t.jsx)("h3",{children:"8 Relay Outputs"}),(0,t.jsx)("div",{className:"outputs-grid",children:C.map(e=>(0,t.jsxs)("div",{className:"output-card",children:[(0,t.jsxs)("div",{className:"output-header",children:[(0,t.jsxs)("span",{children:["Relay ",e.id]}),(0,t.jsx)("button",{className:`mode-toggle ${e.mode}`,onClick:()=>U("relay8",e.id,"auto"===e.mode?"manual":"auto"),children:"auto"===e.mode?"AUTO":"MANUAL"})]}),(0,t.jsx)(i.A,{checked:e.state,onCheckedChange:a=>"manual"===e.mode&&O("relay8",e.id,a),disabled:"auto"===e.mode})]},e.id))})]})})]})]})}}}]);